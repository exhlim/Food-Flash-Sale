(this["webpackJsonpreact-template"]=this["webpackJsonpreact-template"]||[]).push([[0],{47:function(e,t,a){e.exports=a(81)},52:function(e,t,a){},53:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},54:function(e,t,a){},79:function(e,t,a){},81:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(40),i=a.n(l),c=(a(52),a(2)),o=a(3),s=a(5),u=a(4),m=(a(53),a(54),a(14)),h=(a(55),a(17)),p=a(20),d=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={revenue:n.props.cart[0].count/2*n.props.cart[0].price,quantity:n.props.cart[0].count/2,user_id:1},n.handleSubmit=n.handleSubmit.bind(Object(m.a)(n)),n}return Object(o.a)(a,[{key:"handleSubmit",value:function(e){e.preventDefault();var t=new FormData("submission");console.log(t),fetch("/submitOrder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}},{key:"render",value:function(){Object(p.a)(this.props.stripper);return r.a.createElement("div",null,r.a.createElement("h1",null,"Order Summary"),r.a.createElement("p",null,this.props.cart[0].name),r.a.createElement("p",null,"quantity ",this.props.cart[0].count/2),r.a.createElement("p",null,"Total: ",this.props.cart[0].count/2*this.props.cart[0].price),r.a.createElement("form",{style:{maxWidth:"300px",margin:"0 auto"},action:"/submitOrder",method:"POST"},r.a.createElement("input",{type:"hidden",value:this.props.cart[0].merchant_id,name:"merchant_id"}),r.a.createElement("input",{type:"hidden",value:this.state.user_id,name:"user_id"}),r.a.createElement("input",{type:"hidden",value:this.props.cart[0].price,name:"price"}),r.a.createElement("input",{type:"hidden",value:this.props.cart[0].listing_id,name:"listing_id"}),r.a.createElement("input",{type:"hidden",value:this.state.quantity,name:"quantity"}),r.a.createElement("input",{type:"hidden",value:this.state.revenue,name:"revenue"}),r.a.createElement("input",{type:"submit",value:"submit"})))}}]),a}(r.a.Component),E=a(10),g=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).onChange=function(e){n.setState(Object(E.a)({},e.target.name,e.target.value))},n.onSubmit=function(e){e.preventDefault();var t=n.state,a={username:t.username,password:t.password,email:t.email};fetch("/home/register/user",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(e){(console.log(e),e.userId&&e.userName)&&(0,n.props.onRegistered)(e.userId,e.userName)})).catch((function(e){console.log(e)}))},n.state={username:"",email:"",password:""},n}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"login-overlay",style:{display:this.props.displaysignup}},r.a.createElement("div",{className:"formsParent"},r.a.createElement("div",null,"Sign Up as a New User"),r.a.createElement("form",{onSubmit:this.onSubmit,className:"forms"},r.a.createElement("input",{type:"text",name:"username",placeholder:"Username",onChange:this.onChange}),r.a.createElement("br",null),r.a.createElement("input",{type:"text",name:"email",placeholder:"Email",onChange:this.onChange}),r.a.createElement("br",null),r.a.createElement("input",{type:"password",name:"password",placeholder:"password",onChange:this.onChange}),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",value:"Submit"}))))}}]),a}(n.Component),v=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).onChange=function(e){n.setState(Object(E.a)({},e.target.name,e.target.value))},n.onSubmit=function(e){e.preventDefault();var t=n.state,a={username:t.username,password:t.password};fetch("/home/login/user",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(e){e.userId&&e.userName&&(0,n.props.onLogin)(e.userId,e.userName)})).catch((function(e){console.log(e)}))},n.state={username:"",password:""},n}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"login-overlay",style:{display:this.props.displaylogin}},r.a.createElement("div",{className:"formsParent"},r.a.createElement("div",null,"User Login"),r.a.createElement("form",{onSubmit:this.onSubmit,className:"forms"},r.a.createElement("input",{type:"text",name:"username",placeholder:"Username",onChange:this.onChange}),r.a.createElement("br",null),r.a.createElement("input",{type:"password",name:"password",placeholder:"password",onChange:this.onChange}),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",value:"Submit"}))))}}]),a}(n.Component),f=function(e){var t=e.displaysignup,a=e.displaylogin,n=e.onRegistered,l=e.onLogin;return r.a.createElement("div",{className:"hero"},r.a.createElement(g,{displaysignup:t,onRegistered:n}),r.a.createElement(v,{displaylogin:a,onLogin:l}))},b=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"navbar"},r.a.createElement("div",null,"Image here"),r.a.createElement("select",{className:"options",onChange:this.props.changePage},r.a.createElement("option",{value:"user"},"User"),r.a.createElement("option",{value:"merchant"},"Merchant")),r.a.createElement("div",{className:"login break",onClick:this.props.onClickSignUp},"Sign up"),r.a.createElement("div",{className:"login",onClick:this.props.onClickLogin},"Login"))}}]),a}(n.Component),y=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"footer"},r.a.createElement("div",null,"User login page"),r.a.createElement("br",null),r.a.createElement("div",null,"options here"))}}]),a}(n.Component),O=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"navbar"},r.a.createElement("div",null,"Image here"),r.a.createElement("select",{className:"options",onChange:this.props.changePage},r.a.createElement("option",{value:"merchant"},"Merchant"),r.a.createElement("option",{value:"user"},"User")),r.a.createElement("div",{className:"login break",onClick:this.props.onClickSignUp},"Sign up"),r.a.createElement("div",{className:"login",onClick:this.props.onClickLogin},"Login"))}}]),a}(n.Component),C=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).onChange=function(e){n.setState(Object(E.a)({},e.target.name,e.target.value))},n.onSubmit=function(e){e.preventDefault();var t=n.state,a=t.name,r=t.password,l=t.email,i=t.address,c=t.uen,o={name:a,password:r,email:l,address:i,postalCode:t.postalCode,uen:c,cuisine:t.cuisine};fetch("/home/register/merchant",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(o)}).then((function(e){return e.json()})).then((function(e){e.merchantId&&e.merchantUsername&&(0,n.props.MercOnRegistered)(e.merchantId,e.merchantUsername)})).catch((function(e){console.log(e)}))},n.state={name:"",email:"",password:"",address:"",postalCode:"",uen:"",cuisine:""},n}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"login-overlay",style:{display:this.props.displaysignup}},r.a.createElement("div",{className:"formsParent",style:{height:"250px"}},r.a.createElement("div",null,"Sign Up as a New Merchant"),r.a.createElement("form",{onSubmit:this.onSubmit,className:"forms"},r.a.createElement("input",{type:"text",name:"name",placeholder:"username",onChange:this.onChange}),r.a.createElement("br",null),r.a.createElement("input",{type:"text",name:"email",placeholder:"Email",onChange:this.onChange}),r.a.createElement("br",null),r.a.createElement("textarea",{style:{width:"145px",resize:"none"},type:"text",name:"address",placeholder:"Address",onChange:this.onChange}),r.a.createElement("br",null),r.a.createElement("input",{type:"text",name:"postalCode",placeholder:"Postal Code",onChange:this.onChange}),r.a.createElement("br",null),r.a.createElement("input",{type:"text",name:"uen",placeholder:"UEN",onChange:this.onChange}),r.a.createElement("br",null),r.a.createElement("input",{type:"text",name:"cuisine",placeholder:"Cuisine",onChange:this.onChange}),r.a.createElement("br",null),r.a.createElement("input",{type:"password",name:"password",placeholder:"Password",onChange:this.onChange}),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",value:"Submit"}))))}}]),a}(n.Component),j=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).onChange=function(e){n.setState(Object(E.a)({},e.target.name,e.target.value))},n.onSubmit=function(e){e.preventDefault();var t=n.state,a={name:t.name,password:t.password};fetch("/home/login/merchant",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(e){(console.log(e),e.merchantId&&e.merchantUsername)&&(0,n.props.MercOnLogin)(e.merchantId,e.merchantUsername)})).catch((function(e){console.log(e)}))},n.state={name:"",password:""},n}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"login-overlay",style:{display:this.props.displaylogin}},r.a.createElement("div",{className:"formsParent"},r.a.createElement("div",null,"Merchant Login"),r.a.createElement("form",{onSubmit:this.onSubmit,className:"forms"},r.a.createElement("input",{type:"text",name:"name",placeholder:"Username",onChange:this.onChange}),r.a.createElement("br",null),r.a.createElement("input",{type:"password",name:"password",placeholder:"password",onChange:this.onChange}),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",value:"Submit"}))))}}]),a}(n.Component),S=function(e){var t=e.displaysignup,a=e.displaylogin,n=e.MercOnRegistered,l=e.MercOnLogin;return r.a.createElement("div",{className:"hero"},r.a.createElement(C,{displaysignup:t,MercOnRegistered:n}),r.a.createElement(j,{displaylogin:a,MercOnLogin:l}))},k=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"footer"},r.a.createElement("div",null,"Merchant Login page"),r.a.createElement("br",null),r.a.createElement("div",null,"options here"))}}]),a}(n.Component),_=a(45);function N(e){var t=function(){var t=new Date(e.time);t.setMinutes(t.getMinutes()+300);var a=+t-+new Date,n={};return a>0&&(n={hours:Math.floor(a/36e5%24),minutes:Math.floor(a/1e3/60%60),seconds:Math.floor(a/1e3%60)}),n},a=Object(n.useState)(t()),l=Object(_.a)(a,2),i=l[0],c=l[1];Object(n.useEffect)((function(){setTimeout((function(){c(t())}),1e3)}));var o=[];return Object.keys(i).forEach((function(e){i[e]&&o.push(r.a.createElement("span",null,i[e]," ",e," "))})),r.a.createElement(r.a.Fragment,null,o.length?r.a.createElement("div",{key:e.index},r.a.createElement("h1",null,e.children)," ",o):null)}var L=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this)).state={details:[],fetch:!1,receipt_id:e.receipt_id},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("/all/listing",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({receipt_id:this.state.receipt_id})}).then((function(e){return e.json()})).then((function(t){e.setState({details:t,fetch:!0})}))}},{key:"render",value:function(){var e=this.state.details.map((function(e){var t=parseInt(e.price)*parseInt(e.quantity);return t+=parseInt(t)})).reduce((function(e,t){return e+t}),0);return r.a.createElement("div",null,e)}}]),a}(n.Component),w=a(9),U=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).state={orderHistory:[],fetch:!1},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("/orderhistory").then((function(e){return e.json()})).then((function(t){return e.setState({orderHistory:t,fetch:!0})}))}},{key:"render",value:function(){var e=this.state.orderHistory.map((function(e,t){return r.a.createElement("div",null,r.a.createElement("div",{key:t},e.receipt_id,e.name," ",e.cuisine),r.a.createElement(L,{receipt_id:e.receipt_id}),r.a.createElement("button",{onClick:function(e){e.persist(),e.preventDefault()}},"Order Again"))}));return r.a.createElement("div",{className:"orderHistoryWrapper"},this.state.fetch?e:null)}}]),a}(n.Component),I=Object(w.f)(U),M=a(15),P=function(e){var t={name:e.item_name,price:e.discPrice,merchant_id:e.merchant_id,listing_id:e.listing_id};return r.a.createElement("div",{className:"IndivListing"},r.a.createElement("img",{src:"https://source.unsplash.com/-1GEAA8q3wk/100x100",alt:"img"}),r.a.createElement("h4",null,e.item_name),r.a.createElement("p",null,"quantity: ",e.quantity),r.a.createElement("p",null,"original price: ",e.originalPrice),r.a.createElement("p",null,"discount: ",100*e.discount,"%"),r.a.createElement("p",null,"Final Price: ",e.discPrice),r.a.createElement("button",{value:e.listing_id,name:"add",onClick:function(a){a.persist(),e.onClick(a,t)}},"Add to Cart"))},x=a(26),R=a(44),D=(r.a.Component,a(27)),T=a.n(D),q=a(42);function A(e){var t=Object(h.useStripe)(),a=Object(h.useElements)(),n=function(){var n=Object(q.a)(T.a.mark((function n(r){var l,i,c,o;return T.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.preventDefault(),t&&a){n.next=3;break}return n.abrupt("return");case 3:return l=a.getElement(h.CardElement),n.next=6,t.createPaymentMethod({type:"card",card:l});case 6:i=n.sent,c=i.error,o=i.paymentMethod,c?console.log("[error]",c):(console.log("[PaymentMethod]",o),fetch("/submitOrder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({card:o,order:e.data})}).then((function(e){return e.json()})).then((function(e){console.log(e)})));case 10:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return r.a.createElement("form",{style:{maxWidth:"500px",margin:"0 auto"},onSubmit:n},r.a.createElement(h.CardElement,null),r.a.createElement("button",{type:"submit",disabled:!t},"Pay"))}var F=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),n=t.call(this,e),console.log("----inside Listing constructor"),n.state={merchant_id:e.merchant_id,merchant_name:"",merchant_img:"",html:[],result:[],cart:[],viewCart:!1,checkout:!1},n.addToCart=n.addToCart.bind(Object(m.a)(n)),n.navigateTo=n.navigateTo.bind(Object(m.a)(n)),n.handleAddToCart=n.handleAddToCart.bind(Object(m.a)(n)),n.handleRemoveFromCart=n.handleRemoveFromCart.bind(Object(m.a)(n)),n.handleCheckOut=n.handleCheckOut.bind(Object(m.a)(n)),n}return Object(o.a)(a,[{key:"handleCheckOut",value:function(){this.setState({checkout:!0})}},{key:"handleRemoveFromCart",value:function(e,t){this.setState((function(e){var a=e.cart.filter((function(e){return e.name!=t.name}));return localStorage.setItem("cart",a),{cart:a}}))}},{key:"addToCart",value:function(e,t){console.log(t),this.setState((function(e){return{cart:[].concat(Object(R.a)(e.cart),[t])}}))}},{key:"navigateTo",value:function(){this.setState({viewCart:!this.state.viewCart})}},{key:"handleAddToCart",value:function(e,t){console.log(t),this.setState((function(e){var a=e.cart,n=!1;return a.forEach((function(e){e.name===t.name&&(n=!0,e.count++)})),n||a.push(Object(x.a)(Object(x.a)({},t),{},{count:1})),localStorage.setItem("cart",JSON.stringify(a)),a}))}},{key:"componentDidMount",value:function(){var e=this;fetch("/indivshop/".concat(this.state.merchant_id)).then((function(e){return e.json()})).then((function(t){return e.setState({result:t,html:e.format(t),merchant_name:t[0].name})}))}},{key:"componentDidUpdate",value:function(e,t){if(t.checkout!==this.state.checkout)return r.a.createElement(d,null)}},{key:"format",value:function(e){var t=this;return e.map((function(e,a){var n,l=e.item_name,i=e.quantity,c=e.price_ceiling,o=e.unit_price,s=(o-c)/o,u=e.name,m=e.cuisine,h=e.listing_id,p=e.merchant_id;return r.a.createElement("div",{key:a},r.a.createElement(P,(n={item_name:l,quantity:i,discPrice:c,originalPrice:o},Object(E.a)(n,"discPrice",c),Object(E.a)(n,"discount",s),Object(E.a)(n,"merchant_name",u),Object(E.a)(n,"cuisine",m),Object(E.a)(n,"onClick",t.handleAddToCart),Object(E.a)(n,"listing_id",h),Object(E.a)(n,"merchant_id",p),n)))}))}},{key:"render",value:function(){var e=Object(p.a)(this.props.stripper);if(this.state.viewCart&&this.state.cart[0]){var t={merchant_id:this.state.cart[0].merchant_id,name:this.state.cart[0].name,user_id:this.state.cart[0].user_id,listing_id:this.state.cart[0].listing_id,price:this.state.cart[0].price,quantity:this.state.cart[0].count/2,revenue:this.state.cart[0].count/2*this.state.cart[0].price};return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h1",null,"You are viewing deals from ",this.state.merchant_name),r.a.createElement("br",null),r.a.createElement("h1",null,"Order Summary"),r.a.createElement("table",{style:{maxWidth:"300px",margin:"0 auto"}},r.a.createElement("tr",null,r.a.createElement("th",null,"Item Name"),r.a.createElement("th",null,"Quantity"),r.a.createElement("th",null,"Total")),r.a.createElement("tr",null,r.a.createElement("td",null,this.state.cart[0].name),r.a.createElement("td",null,this.state.cart[0].count/2),r.a.createElement("td",null,"Total: $",this.state.cart[0].count/2*this.state.cart[0].price))),r.a.createElement(h.Elements,{stripe:e},r.a.createElement(A,{data:t}))),r.a.createElement("div",{className:"ListItems"},this.state.html))}return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:this.navigateTo},"View Cart ",this.state.cart.length),r.a.createElement("h1",null,"You are viewing deals from ",this.state.merchant_name),r.a.createElement("br",null),r.a.createElement("div",{className:"ListItems"},this.state.html))}}]),a}(r.a.Component),J=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).state={timeLine:[]},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("/timeline").then((function(e){return e.json()})).then((function(t){console.log(t),e.setState({timeLine:t})}))}},{key:"render",value:function(){var e=this.state.timeLine.map((function(e,t){var a=(e.unit_price-e.price_floor)/e.unit_price*100,n="/"+e.merchant_id;return r.a.createElement(M.b,{to:n},r.a.createElement("div",{className:"indMerc"},r.a.createElement(N,{key:t,duration:e.time_limit_min,time:e.time,merchant_Id:e.merchant_id},r.a.createElement("div",null,e.name),r.a.createElement("div",null,"up to",a,"%"))))})),t=this.state.timeLine.map((function(e,t){var a="/"+e.merchant_id;return r.a.createElement(w.a,{path:a,render:function(){return r.a.createElement(F,{merchant_id:e.merchant_id})}})}));return r.a.createElement("div",null,r.a.createElement("div",{className:"navbar"},r.a.createElement("div",null,"Image here"),r.a.createElement(M.b,{className:"login break",to:"/Timeline"},"Timeline"),r.a.createElement(M.b,{className:"login break",to:"/Orderhistory"},"Order history"),r.a.createElement("button",{onClick:this.props.onLogout},"Log out")),r.a.createElement("main",null,r.a.createElement(w.c,null,t,r.a.createElement(w.a,{path:"/Orderhistory",render:function(){return r.a.createElement(I,null)}}),r.a.createElement(w.a,{path:"/",render:function(){return r.a.createElement("div",null,e)}}))))}}]),a}(n.Component),H=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).state={latUser:0,lonUser:0},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;"geolocation"in navigator?(console.log("geolocation available"),navigator.geolocation.getCurrentPosition((function(t){var a=t.coords.latitude,n=t.coords.longitude;e.setState({latUser:a,lonUser:n})}))):console.log("geolocation not available")}},{key:"render",value:function(){return r.a.createElement("div",null,"latitude: ",r.a.createElement("span",{id:"latitude"},this.state.latUser,"\xb0"),r.a.createElement("br",null),"longitude: ",r.a.createElement("span",{id:"longitude"},this.state.lonUser,"\xb0"),r.a.createElement(J,{lon:this.state.lonUser,lat:this.state.latUser,onLogout:this.props.onLogout}))}}]),a}(r.a.Component),W=(n.Component,function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"footer"},r.a.createElement("div",null,"User login page"),r.a.createElement("br",null),r.a.createElement("div",null,"options here"))}}]),a}(n.Component)),Q=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(H,{onLogout:this.props.onLogout}),r.a.createElement(W,null))}}]),a}(n.Component),B=a(7),Y=a.n(B),G=(a(79),function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this)).toggleSwitch=function(e){e.persist(),e.preventDefault(),n.setState({enabled:!n.state.enabled}),n.props.onToggle(!n.state.enabled,n.props.id)},n.state={enabled:e.boolean},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state.enabled,t=Y()("switch-toggle","switch-toggle--".concat(e?"on":"off"));return r.a.createElement("div",{className:"switch switch--default",onClick:this.toggleSwitch},r.a.createElement("div",{className:t}))}}]),a}(n.Component)),$=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).toggleOnclickHandler=function(t,a){fetch("/togglelisting",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({listing_id:a,boolean:t})}).then((function(e){return e.text()})).then((function(t){console.log(t),e.setState({fetch:!e.state.fetch})}))},e.state={list:[],fetch:!1},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("/all/listing/1").then((function(e){return e.json()})).then((function(t){e.setState({list:t})}))}},{key:"render",value:function(){var e=this,t=this.state.list.map((function(t,a){return r.a.createElement("tr",null,r.a.createElement("td",null,t.item_name),r.a.createElement("td",null,t.unit_price),r.a.createElement("td",null,t.quantity),r.a.createElement("td",null,t.price_ceiling),r.a.createElement("td",null,t.price_floor),r.a.createElement("td",null,t.category_id),r.a.createElement("td",null,t.description),r.a.createElement("td",null,t.time_limit_min),r.a.createElement("td",null,r.a.createElement(G,{onToggle:e.toggleOnclickHandler,id:t.listing_id,boolean:t.live})))}));return r.a.createElement("table",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Item Name"),r.a.createElement("th",null,"Unit Price"),r.a.createElement("th",null,"Quantity"),r.a.createElement("th",null,"Maximum Price"),r.a.createElement("th",null,"Minimum Price"),r.a.createElement("th",null,"Category"),r.a.createElement("th",null,"Description"),r.a.createElement("th",null,"Duration"),r.a.createElement("th",null,"Status")),t)}}]),a}(n.Component),z=a(82),V=a(43),K=a(83),X=(a(38),function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.call(this)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement(z.a,{action:"/newListing",method:"post"},r.a.createElement(z.a.Row,null,r.a.createElement(z.a.Label,{column:!0,lg:2},"Item Name"),r.a.createElement(V.a,null,r.a.createElement(z.a.Control,{type:"text",placeholder:"Item Name",name:"item_name"}))),r.a.createElement("br",null),r.a.createElement(z.a.Row,null,r.a.createElement(z.a.Label,{column:!0,lg:2},"Unit Price"),r.a.createElement(V.a,null,r.a.createElement(z.a.Control,{type:"text",placeholder:"Unit Price",name:"unit_price"}))),r.a.createElement("br",null),r.a.createElement(z.a.Row,null,r.a.createElement(z.a.Label,{column:!0,lg:2},"Quantity"),r.a.createElement(V.a,null,r.a.createElement(z.a.Control,{type:"text",placeholder:"Quantity",name:"quantity"}))),r.a.createElement("br",null),r.a.createElement(z.a.Row,null,r.a.createElement(z.a.Label,{column:!0,lg:2},"Maximum Price"),r.a.createElement(V.a,null,r.a.createElement(z.a.Control,{type:"text",placeholder:"maximum price",name:"price_ceiling"}))),r.a.createElement("br",null),r.a.createElement(z.a.Row,null,r.a.createElement(z.a.Label,{column:!0,lg:2},"Minimum Price"),r.a.createElement(V.a,null,r.a.createElement(z.a.Control,{type:"text",placeholder:"minimum price",name:"price_floor"}))),r.a.createElement("br",null),r.a.createElement(z.a.Row,null,r.a.createElement(z.a.Label,{column:!0,lg:2},"Category"),r.a.createElement(V.a,null,r.a.createElement(z.a.Control,{name:"category_id",as:"select",custom:!0},r.a.createElement("option",{value:"1"},"Snacks"),r.a.createElement("option",{value:"2"},"Light Bites"),r.a.createElement("option",{value:"3"},"Dim Sum"),r.a.createElement("option",{value:"4"},"Noodles"),r.a.createElement("option",{value:"5"},"Junk Food"),r.a.createElement("option",{value:"6"},"Hearty Meals"),r.a.createElement("option",{value:"7"},"Snacks"),r.a.createElement("option",{value:"8"},"Light Bites"),r.a.createElement("option",{value:"9"},"Dim Sum"),r.a.createElement("option",{value:"10"},"Noodles"),r.a.createElement("option",{value:"11"},"Junk Food"),r.a.createElement("option",{value:"12"},"Hearty Meals")))),r.a.createElement("br",null),r.a.createElement(z.a.Row,null,r.a.createElement(z.a.Label,{column:!0,lg:2},"Description"),r.a.createElement(V.a,null,r.a.createElement(z.a.Control,{type:"text",placeholder:"Description",name:"description"}))),r.a.createElement("br",null),r.a.createElement(z.a.Row,null,r.a.createElement(z.a.Label,{column:!0,lg:2},"Duration"),r.a.createElement(V.a,null,r.a.createElement(z.a.Control,{type:"text",placeholder:"Time in Minutes",name:"time_limit_min"}))),r.a.createElement(K.a,{type:"submit",className:"mb-2"},"Submit"),r.a.createElement(V.a,null,r.a.createElement(z.a.Control,{type:"hidden",placeholder:"Normal text",name:"merchant_id"})))}}]),a}(n.Component)),Z=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(c.a)(this,a),t.call(this,e)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement(z.a,{action:"/editlisting",method:"post"},r.a.createElement(z.a.Row,null,r.a.createElement(z.a.Label,{column:!0,lg:2},"Item Name"),r.a.createElement(V.a,null,r.a.createElement(z.a.Control,{type:"text",placeholder:this.props.item_name,name:"item_name"}))),r.a.createElement("br",null),r.a.createElement(z.a.Row,null,r.a.createElement(z.a.Label,{column:!0,lg:2},"Unit Price"),r.a.createElement(V.a,null,r.a.createElement(z.a.Control,{type:"text",placeholder:this.props.unit_price,name:"unit_price"}))),r.a.createElement("br",null),r.a.createElement(z.a.Row,null,r.a.createElement(z.a.Label,{column:!0,lg:2},"Quantity"),r.a.createElement(V.a,null,r.a.createElement(z.a.Control,{type:"text",placeholder:this.props.quantity,name:"quantity"}))),r.a.createElement("br",null),r.a.createElement(z.a.Row,null,r.a.createElement(z.a.Label,{column:!0,lg:2},"Maximum Price"),r.a.createElement(V.a,null,r.a.createElement(z.a.Control,{type:"text",placeholder:this.props.price_ceiling,name:"price_ceiling"}))),r.a.createElement("br",null),r.a.createElement(z.a.Row,null,r.a.createElement(z.a.Label,{column:!0,lg:2},"Minimum Price"),r.a.createElement(V.a,null,r.a.createElement(z.a.Control,{type:"text",placeholder:this.props.price_floor,name:"price_floor"}))),r.a.createElement("br",null),r.a.createElement(z.a.Row,null,r.a.createElement(z.a.Label,{column:!0,lg:2},"Category"),r.a.createElement(V.a,null,r.a.createElement(z.a.Control,{type:"text",placeholder:this.props.category_id}))),r.a.createElement("br",null),r.a.createElement(z.a.Row,null,r.a.createElement(z.a.Label,{column:!0,lg:2},"Description"),r.a.createElement(V.a,null,r.a.createElement(z.a.Control,{type:"text",placeholder:this.props.description,name:"description"}))),r.a.createElement("br",null),r.a.createElement(z.a.Row,null,r.a.createElement(z.a.Label,{column:!0,lg:2},"Duration"),r.a.createElement(V.a,null,r.a.createElement(z.a.Control,{type:"text",placeholder:this.props.time_limit,name:"time_limit_min"}))),r.a.createElement(K.a,{type:"submit",className:"mb-2"},"Submit"),r.a.createElement(V.a,null,r.a.createElement(z.a.Control,{type:"hidden",placeholder:"Normal text",name:"{this.props.merchant_id}"})))}}]),a}(n.Component),ee=(r.a.Component,function(e){return r.a.createElement("div",null,r.a.createElement("label",{for:"sort"},"Sort by"),r.a.createElement("select",{name:"sort",id:"sort",value:e.optionChoice,onChange:e.onChange},r.a.createElement("option",{value:"default"},"Date"),r.a.createElement("option",{value:"name"},"Name"),r.a.createElement("option",{value:"revenue"},"Revenue")))}),te=function(e){return r.a.createElement("div",{className:"IndivOrder"},r.a.createElement("h1",null,"Order ID: ",e.order_id),r.a.createElement("h4",null,e.name),r.a.createElement("p",null,"quantity: ",e.quantity),r.a.createElement("p",null,"date: ",e.date),r.a.createElement("p",null,"revenue: ",e.revenue))},ae=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={searchResult:[],ordersResult:[],merchant_id:1,html:""},n.format=n.format.bind(Object(m.a)(n)),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.display&&fetch("/merchantorders/"+this.state.merchant_id).then((function(e){return e.json()})).then((function(t){if(t.length<1)e.setState({html:"You have no orders yet"});else{var a=e.format(t);e.setState({ordersResult:t,html:a})}})).catch((function(e){console.log("error happened--- at GET MERCHANT ORDER MOUNT",e.message)}))}},{key:"componentDidUpdate",value:function(e){if(e.sort!==this.props.sort){this.sortMe(this.state.ordersResult,this.state.sort);var t=this.format(this.state.ordersResult);this.setState({html:t})}}},{key:"format",value:function(e){return e.map((function(e,t){var a=e.order_id,n=e.price,l=e.quantity,i=e.item_name,c=e.date_created,o=e.revenue;return r.a.createElement(te,{order_id:a,price:n,quantity:l,name:i,date:c,revenue:o,key:t})}))}},{key:"sortMe",value:function(e,t){switch(t){case"name":e.sort((function(e,t){return t.item_name>e.item_name?1:-1}));break;case"revenue":e.sort((function(e,t){return t.revenue>e.revenue?1:-1}));break;default:return e}}},{key:"render",value:function(){return r.a.createElement("div",null,this.state.html)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{sort:e.sort}}}]),a}(r.a.Component),ne=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).onChangeSort=function(e){var t=e.target.value;n.setState({sort:t})},n.state={display:!0,sort:"default"},n}return Object(o.a)(a,[{key:"render",value:function(){if(this.state.display)return r.a.createElement("div",null,r.a.createElement(ee,{onChange:this.onChangeSort,optionChoice:this.state.sort}),r.a.createElement(ae,{display:this.state.display,sort:this.state.sort}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{realDisplay:e.query}}}]),a}(r.a.Component),re=(n.Component,function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"navbar"},r.a.createElement("div",null,"Image here"),r.a.createElement(M.b,{to:"/",className:"login break"},"Dashboard"),r.a.createElement(M.b,{to:"/ItemList",className:"login"},"Item List"),r.a.createElement(M.b,{to:"/CreateItem",className:"login"},"Create Item"),r.a.createElement(M.b,{to:"/AllOrders",className:"login"},"All Orders"),r.a.createElement("button",{onClick:this.props.onLogout},"Log out")),r.a.createElement(w.c,null,r.a.createElement(w.a,{path:"/ItemList",render:function(){return r.a.createElement($,null)}}),r.a.createElement(w.a,{path:"/CreateItem",render:function(){return r.a.createElement(X,null)}}),r.a.createElement(w.a,{path:"/AllOrders",render:function(){return r.a.createElement(ne,null)}}),r.a.createElement(w.a,{path:"/",render:function(){return r.a.createElement("div",null,"This here is the merchant dashboard")}})))}}]),a}(n.Component)),le=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).onClickSignUp=function(t){e.state.alternate?e.setState({displayOverlaySignUp:"block",displayOverlayLogin:"none",alternate2:!0,alternate:!1}):e.setState({displayOverlaySignUp:"none",alternate:!0})},e.onClickLogin=function(t){e.state.alternate2?e.setState({displayOverlayLogin:"block",displayOverlaySignUp:"none",alternate:!0,alternate2:!1}):e.setState({displayOverlayLogin:"none",alternate2:!0})},e.onRegistered=function(t,a){e.setState({userId:t,userName:a})},e.onLogin=function(t,a){e.setState({userId:t,userName:a})},e.MercOnRegistered=function(t,a){e.setState({merchantId:t,merchantUsername:a})},e.MercOnLogin=function(t,a){e.setState({merchantId:t,merchantUsername:a})},e.changePage=function(t){e.setState({changePage:t.target.value})},e.onLogout=function(t){fetch("/logout").then((function(e){return e.json()})).then((function(e){})),e.setState({merchantId:"",merchantUsername:"",userId:"",userName:""})},e.state={userId:"",userName:"",merchantId:"",merchantUsername:"",optionsChoice:"User",displayOverlaySignUp:"none",displayOverlayLogin:"none",alternate:!0,alternate2:!0,changePage:"user"},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("/home").then((function(e){return e.json()})).then((function(t){t.userId&&t.userName&&e.setState({userId:t.userId,userName:t.userName}),t.merchantId&&t.merchantUsername&&e.setState({merchantId:t.merchantId,merchantUsername:t.merchantUsername})}))}},{key:"render",value:function(){return this.state.merchantId&&this.state.merchantUsername?r.a.createElement(re,{className:"App MainContainerMerchant",onLogout:this.onLogout}):this.state.userId&&this.state.userName?r.a.createElement(Q,{className:"App MainContainerUser",userId:this.state.userId,onLogout:this.onLogout}):"user"==this.state.changePage?r.a.createElement("div",{className:"App"},r.a.createElement(b,{onClickSignUp:this.onClickSignUp,onClickLogin:this.onClickLogin,changePage:this.changePage}),r.a.createElement(f,{displaysignup:this.state.displayOverlaySignUp,displaylogin:this.state.displayOverlayLogin,onRegistered:this.onRegistered,onLogin:this.onLogin}),r.a.createElement(y,null)):r.a.createElement("div",{className:"App"},r.a.createElement(O,{onClickSignUp:this.onClickSignUp,onClickLogin:this.onClickLogin,changePage:this.changePage}),r.a.createElement(S,{displaysignup:this.state.displayOverlaySignUp,displaylogin:this.state.displayOverlayLogin,MercOnRegistered:this.MercOnRegistered,MercOnLogin:this.MercOnLogin}),r.a.createElement(k,null))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return null}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(M.a,null,r.a.createElement(le,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[47,1,2]]]);
//# sourceMappingURL=main.0da85e79.chunk.js.map