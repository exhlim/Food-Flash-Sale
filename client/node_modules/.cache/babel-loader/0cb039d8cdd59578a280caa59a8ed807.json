{"ast":null,"code":"var _jsxFileName = \"/Users/aurelialim/wdi/SEI-24-Project-3/client/src/Components/User/IndivStore/ListingContainer.js\";\nimport React from 'react';\nimport IndivListing from './IndivListing';\nexport default class ListingContainer extends React.Component {\n  constructor(props) {\n    //mounting\n    super(props);\n\n    this.addToCart = item => {\n      this.setState(prevState => {\n        cart: [...prevState.cart, item];\n      });\n    };\n\n    console.log(\"----inside Listing constructor\");\n    this.state = {\n      merchant_id: props.merchant_id,\n      merchant_name: \"\",\n      merchant_img: \"\",\n      html: [],\n      result: [],\n      cart: []\n    };\n  } //set state with props from parent: SEARCH\n\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    //mounting\n    return {\n      display: nextProps.display\n    };\n  } //when state is changed, FETCH results from aPI\n  //side effects ie: HTTP requests are allowed here\n\n\n  componentDidMount() {\n    //mounting\n    if (this.props.display) {\n      let url = `/indivshop/1`;\n      fetch(url).then(res => res.json()).then(res => {\n        if (res.length < 1) {\n          res.send(\"ERROR AT MOUNT\");\n        } else {\n          this.setState({\n            merchant_name: res[0].name\n          });\n          let formattedResult = this.format(res);\n          this.setState({\n            result: res,\n            html: formattedResult\n          });\n        }\n      }).catch(error => {\n        console.log(\"error happened\", error.message);\n      });\n    }\n\n    console.log(\"----inside componentDidMount\");\n  } //add to cart click handler\n\n\n  //helper functions\n  //take the res.json and convert into nice HTML\n  format(array) {\n    return array.map((item, index) => {\n      let item_name = item.item_name;\n      let quantity = item.quantity;\n      let discPrice = item.price_ceiling;\n      let originalPrice = item.unit_price;\n      let discount = (originalPrice - discPrice) / originalPrice;\n      let merchant_name = item.name;\n      let cuisine = item.cuisine;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 16\n        }\n      }, /*#__PURE__*/React.createElement(IndivListing, {\n        item_name: item_name,\n        quantity: quantity,\n        discPrice: discPrice,\n        originalPrice: originalPrice,\n        discount: discount,\n        merchant_name: merchant,\n        cuisine: cuisine,\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"button\", {\n        onClick: this.addToCart,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 9\n        }\n      }, \"Add to Cart\"));\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"button\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 13\n      }\n    }, \"View Cart \", this.state.cart.length), /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }\n    }, \"You are viewing deals from \", this.state.merchant_name), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ListItems\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }\n    }, this.state.html));\n  }\n\n}","map":{"version":3,"sources":["/Users/aurelialim/wdi/SEI-24-Project-3/client/src/Components/User/IndivStore/ListingContainer.js"],"names":["React","IndivListing","ListingContainer","Component","constructor","props","addToCart","item","setState","prevState","cart","console","log","state","merchant_id","merchant_name","merchant_img","html","result","getDerivedStateFromProps","nextProps","display","componentDidMount","url","fetch","then","res","json","length","send","name","formattedResult","format","catch","error","message","array","map","index","item_name","quantity","discPrice","price_ceiling","originalPrice","unit_price","discount","cuisine","merchant","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport IndivListing from './IndivListing';\n\n\n\nexport default class ListingContainer extends React.Component {\n    constructor(props){\n        //mounting\n        super(props)\n        console.log(\"----inside Listing constructor\")\n\n        this.state = {\n            merchant_id: props.merchant_id,\n            merchant_name: \"\",\n            merchant_img: \"\",\n            html: [],\n            result: [],\n            cart: []\n        }\n    }\n\n//set state with props from parent: SEARCH\n    static getDerivedStateFromProps(nextProps,prevState) {\n        //mounting\n        return { display : nextProps.display}\n    }\n\n\n//when state is changed, FETCH results from aPI\n//side effects ie: HTTP requests are allowed here\n    componentDidMount() {\n        //mounting\n        if(this.props.display) {\n            let url = `/indivshop/1`\n        fetch(url)\n        .then(res => res.json())\n        .then(res => {\n            if(res.length < 1){\n                res.send(\"ERROR AT MOUNT\")\n            } else {\n                this.setState({merchant_name: res[0].name})\n                let formattedResult = this.format(res);\n                this.setState({result: res, html:formattedResult})\n            }\n        })\n        .catch(error => {\n        console.log(\"error happened\", error.message)\n    });\n    }\n        console.log(\"----inside componentDidMount\")\n    }\n\n//add to cart click handler\n\naddToCart = (item) => {\n    this.setState((prevState)=>{\n        cart: [...prevState.cart,item]\n    })\n}\n\n\n\n//helper functions\n\n//take the res.json and convert into nice HTML\nformat(array) {\n    return array.map((item,index)=>{\n        let item_name = item.item_name;\n        let quantity = item.quantity;\n        let discPrice = item.price_ceiling;\n        let originalPrice =item.unit_price;\n        let discount = (originalPrice-discPrice)/originalPrice\n        let merchant_name = item.name;\n        let cuisine = item.cuisine\n\n        return <div>\n        <IndivListing item_name={item_name} quantity={quantity} discPrice ={discPrice} originalPrice={originalPrice} discount={discount} merchant_name={merchant} cuisine={cuisine} key={index} />\n        <button onClick ={this.addToCart}>Add to Cart</button>\n        </div>\n    })\n}\n\n\n\n\n    render(){\n\n\n        return (\n            <>\n            <button>View Cart {this.state.cart.length}</button>\n                <h1>You are viewing deals from {this.state.merchant_name}</h1>\n                <br/>\n\n                <div className=\"ListItems\" >\n                {this.state.html}\n                </div>\n\n\n            </>\n            )\n    }\n}"]},"metadata":{},"sourceType":"module"}