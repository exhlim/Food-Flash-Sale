{"ast":null,"code":"var _jsxFileName = \"/Users/aurelialim/wdi/SEI-24-Project-3/client/src/Components/User/IndivStore/ListingContainer.js\";\nimport React from 'react';\nimport IndivListing from './IndivListing';\nimport Basket from './Basket';\nexport default class ListingContainer extends React.Component {\n  constructor(props) {\n    //mounting\n    super(props);\n    console.log(\"----inside Listing constructor\");\n    this.state = {\n      merchant_id: props.merchant_id,\n      merchant_name: \"\",\n      merchant_img: \"\",\n      html: [],\n      result: [],\n      cart: [],\n      viewCart: false\n    };\n    this.addToCart = this.addToCart.bind(this);\n    this.navigateTo = this.navigateTo.bind(this);\n  } //add to cart button\n\n\n  addToCart(event) {\n    let x = event.target.value;\n    this.setState(prevState => ({\n      cart: [...prevState.cart, x]\n    }));\n  } // view cart button\n\n\n  navigateTo() {\n    this.setState({\n      viewCart: true\n    });\n  } //when state is changed, FETCH results from aPI\n  //side effects ie: HTTP requests are allowed here\n\n\n  componentDidMount() {\n    fetch(\"/indivshop/1\").then(res => res.json()).then(res => this.setState({\n      result: res,\n      html: this.format(res),\n      merchant_name: res[0].name\n    }));\n  } //helper functions\n  //take the res.json and convert into nice HTML\n\n\n  format(array) {\n    return array.map((item, index) => {\n      let item_name = item.item_name;\n      let quantity = item.quantity;\n      let discPrice = item.price_ceiling;\n      let originalPrice = item.unit_price;\n      let discount = (originalPrice - discPrice) / originalPrice;\n      let merchant_name = item.name;\n      let cuisine = item.cuisine;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 16\n        }\n      }, /*#__PURE__*/React.createElement(IndivListing, {\n        item_name: item_name,\n        quantity: quantity,\n        discPrice: discPrice,\n        originalPrice: originalPrice,\n        discount: discount,\n        merchant_name: merchant_name,\n        cuisine: cuisine,\n        key: index,\n        onClick: this.addToCart,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 9\n        }\n      }));\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.navigateTo,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 13\n      }\n    }, \"View Cart \", this.state.cart.length), /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }\n    }, \"You are viewing deals from \", this.state.merchant_name), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ListItems\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }\n    }, this.state.html), /*#__PURE__*/React.createElement(Basket, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }\n    }));\n  }\n\n}","map":{"version":3,"sources":["/Users/aurelialim/wdi/SEI-24-Project-3/client/src/Components/User/IndivStore/ListingContainer.js"],"names":["React","IndivListing","Basket","ListingContainer","Component","constructor","props","console","log","state","merchant_id","merchant_name","merchant_img","html","result","cart","viewCart","addToCart","bind","navigateTo","event","x","target","value","setState","prevState","componentDidMount","fetch","then","res","json","format","name","array","map","item","index","item_name","quantity","discPrice","price_ceiling","originalPrice","unit_price","discount","cuisine","render","length"],"mappings":"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","sourcesContent":["import React from 'react';\nimport IndivListing from './IndivListing';\nimport Basket from './Basket';\n\n\n\nexport default class ListingContainer extends React.Component {\n    constructor(props){\n        //mounting\n        super(props)\n        console.log(\"----inside Listing constructor\")\n\n        this.state = {\n            merchant_id: props.merchant_id,\n            merchant_name: \"\",\n            merchant_img: \"\",\n            html: [],\n            result: [],\n            cart: [],\n            viewCart: false\n        }\n\n        this.addToCart = this.addToCart.bind(this);\n        this.navigateTo = this.navigateTo.bind(this)\n    }\n\n//add to cart button\naddToCart(event){\n    let x = event.target.value\n    this.setState((prevState)=>\n        ({cart:[...prevState.cart,x]}))\n}\n\n// view cart button\nnavigateTo(){\n    this.setState({viewCart:true})\n}\n\n\n//when state is changed, FETCH results from aPI\n//side effects ie: HTTP requests are allowed here\n    componentDidMount() {\n        fetch(\"/indivshop/1\")\n        .then(res => res.json())\n        .then(res =>\n                this.setState({result: res, html:this.format(res),merchant_name: res[0].name})\n        )\n    }\n\n\n\n\n\n\n//helper functions\n\n//take the res.json and convert into nice HTML\nformat(array) {\n    return array.map((item,index)=>{\n        let item_name = item.item_name;\n        let quantity = item.quantity;\n        let discPrice = item.price_ceiling;\n        let originalPrice =item.unit_price;\n        let discount = (originalPrice-discPrice)/originalPrice\n        let merchant_name = item.name;\n        let cuisine = item.cuisine\n\n        return <div>\n        <IndivListing item_name={item_name} quantity={quantity} discPrice ={discPrice} originalPrice={originalPrice} discount={discount} merchant_name={merchant_name} cuisine={cuisine} key={index} onClick ={this.addToCart}/>\n\n        </div>\n    })\n}\n\n\n\n\n    render(){\n\n\n        return (\n            <>\n            <button onClick={this.navigateTo}>View Cart {this.state.cart.length}</button>\n                <h1>You are viewing deals from {this.state.merchant_name}</h1>\n                <br/>\n\n                <div className=\"ListItems\" >\n                {this.state.html}\n                </div>\n\n                <Basket/>\n\n\n            </>\n            )\n    }\n}"]},"metadata":{},"sourceType":"module"}