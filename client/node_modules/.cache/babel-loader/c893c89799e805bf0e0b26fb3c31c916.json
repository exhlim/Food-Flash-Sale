{"ast":null,"code":"import _slicedToArray from\"/Users/eugenelim/Desktop/wdi/SEI-24-Project-3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';export default function EachMerchant(props){// console.log(props.duration);\n// console.log(props.time);\n// console.log(+props.duration - Math.floor((new Date(props.time) / 1000 / 60) % 60))\nvar calculateTimeLeft=function calculateTimeLeft(){var uploadTime=new Date(props.time);uploadTime.setMinutes(uploadTime.getMinutes()+300);var difference=+uploadTime-+new Date();var timeLeft={};if(difference>0){timeLeft={hours:Math.floor(difference/(1000*60*60)%24),minutes:Math.floor(difference/1000/60%60),seconds:Math.floor(difference/1000%60)};}return timeLeft;};// componentDidMount() {\n//     fetch('/timeline')\n//         .then(res => res.json())\n//         .then(res => {\n//             console.log(res)\n//         })\n// }\nvar _useState=useState(calculateTimeLeft()),_useState2=_slicedToArray(_useState,2),timeLeft=_useState2[0],setTimeLeft=_useState2[1];useEffect(function(){setTimeout(function(){setTimeLeft(calculateTimeLeft());},1000);});var timerComponents=[];Object.keys(timeLeft).forEach(function(interval){if(!timeLeft[interval]){return;}timerComponents.push(/*#__PURE__*/React.createElement(\"span\",null,timeLeft[interval],\" \",interval,\" \"));});return/*#__PURE__*/React.createElement(React.Fragment,null,timerComponents.length?/*#__PURE__*/React.createElement(\"div\",{key:props.index},/*#__PURE__*/React.createElement(\"h1\",null,props.children),\" \",timerComponents):null);}","map":{"version":3,"sources":["/Users/eugenelim/Desktop/wdi/SEI-24-Project-3/client/src/Components/User/TimeLine/EachMerchant/EachMerchant.js"],"names":["React","useEffect","useState","EachMerchant","props","calculateTimeLeft","uploadTime","Date","time","setMinutes","getMinutes","difference","timeLeft","hours","Math","floor","minutes","seconds","setTimeLeft","setTimeout","timerComponents","Object","keys","forEach","interval","push","length","index","children"],"mappings":"2KAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CAEA,cAAe,SAASC,CAAAA,YAAT,CAAsBC,KAAtB,CAA6B,CAExC;AACA;AACA;AAEA,GAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,EAAM,CAC5B,GAAMC,CAAAA,UAAU,CAAG,GAAIC,CAAAA,IAAJ,CAASH,KAAK,CAACI,IAAf,CAAnB,CACAF,UAAU,CAACG,UAAX,CAAsBH,UAAU,CAACI,UAAX,GAA0B,GAAhD,EACA,GAAMC,CAAAA,UAAU,CAAG,CAACL,UAAD,CAAc,CAAC,GAAIC,CAAAA,IAAJ,EAAlC,CACA,GAAIK,CAAAA,QAAQ,CAAG,EAAf,CACA,GAAID,UAAU,CAAG,CAAjB,CAAoB,CAChBC,QAAQ,CAAG,CACPC,KAAK,CAAEC,IAAI,CAACC,KAAL,CAAYJ,UAAU,EAAI,KAAO,EAAP,CAAY,EAAhB,CAAX,CAAkC,EAA7C,CADA,CAEPK,OAAO,CAAEF,IAAI,CAACC,KAAL,CAAYJ,UAAU,CAAG,IAAb,CAAoB,EAArB,CAA2B,EAAtC,CAFF,CAGPM,OAAO,CAAEH,IAAI,CAACC,KAAL,CAAYJ,UAAU,CAAG,IAAd,CAAsB,EAAjC,CAHF,CAAX,CAKH,CACD,MAAOC,CAAAA,QAAP,CACH,CAbD,CAeA;AACA;AACA;AACA;AACA;AAEA;AACA;AA5BwC,cA8BRV,QAAQ,CAACG,iBAAiB,EAAlB,CA9BA,wCA8BjCO,QA9BiC,eA8BvBM,WA9BuB,eAgCxCjB,SAAS,CAAC,UAAM,CACZkB,UAAU,CAAC,UAAM,CACbD,WAAW,CAACb,iBAAiB,EAAlB,CAAX,CACH,CAFS,CAEP,IAFO,CAAV,CAGH,CAJQ,CAAT,CAMA,GAAMe,CAAAA,eAAe,CAAG,EAAxB,CAGAC,MAAM,CAACC,IAAP,CAAYV,QAAZ,EAAsBW,OAAtB,CAA8B,SAACC,QAAD,CAAc,CACxC,GAAI,CAACZ,QAAQ,CAACY,QAAD,CAAb,CAAyB,CACrB,OACH,CAEDJ,eAAe,CAACK,IAAhB,cACI,gCACKb,QAAQ,CAACY,QAAD,CADb,KAC0BA,QAD1B,CACoC,GADpC,CADJ,EAKH,CAVD,EAaA,mBACI,wCAEQJ,eAAe,CAACM,MAAhB,cAAyB,2BAAK,GAAG,CAAEtB,KAAK,CAACuB,KAAhB,eACrB,8BAAKvB,KAAK,CAACwB,QAAX,CADqB,KACMR,eADN,CAAzB,CACwD,IAHhE,CADJ,CAQH","sourcesContent":["import React, { useEffect, useState } from 'react'\n\nexport default function EachMerchant(props) {\n\n    // console.log(props.duration);\n    // console.log(props.time);\n    // console.log(+props.duration - Math.floor((new Date(props.time) / 1000 / 60) % 60))\n\n    const calculateTimeLeft = () => {\n        const uploadTime = new Date(props.time)\n        uploadTime.setMinutes(uploadTime.getMinutes() + 300)\n        const difference = +uploadTime - +new Date();\n        let timeLeft = {};\n        if (difference > 0) {\n            timeLeft = {\n                hours: Math.floor((difference / (1000 * 60 * 60)) % 24),\n                minutes: Math.floor((difference / 1000 / 60) % 60),\n                seconds: Math.floor((difference / 1000) % 60)\n            };\n        }\n        return timeLeft\n    };\n\n    // componentDidMount() {\n    //     fetch('/timeline')\n    //         .then(res => res.json())\n    //         .then(res => {\n    //             console.log(res)\n\n    //         })\n    // }\n\n    const [timeLeft, setTimeLeft] = useState(calculateTimeLeft());\n\n    useEffect(() => {\n        setTimeout(() => {\n            setTimeLeft(calculateTimeLeft());\n        }, 1000);\n    });\n\n    const timerComponents = [];\n\n\n    Object.keys(timeLeft).forEach((interval) => {\n        if (!timeLeft[interval]) {\n            return;\n        }\n\n        timerComponents.push(\n            <span>\n                {timeLeft[interval]} {interval}{\" \"}\n            </span>\n        );\n    });\n\n\n    return (\n        <>\n            {\n                timerComponents.length ? <div key={props.index}>\n                    <h1>{props.children}</h1> {timerComponents}</div> : null\n            }\n        </>\n    )\n}"]},"metadata":{},"sourceType":"module"}