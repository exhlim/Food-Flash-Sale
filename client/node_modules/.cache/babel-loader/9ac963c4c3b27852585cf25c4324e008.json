{"ast":null,"code":"var _jsxFileName = \"/home/rlyz/wdi/sei-24-project-3/client/src/Components/Merchant Home/Edit/EditForm.js\";\nimport React, { Component, useParams } from 'react';\nimport { withRouter } from 'react-router';\nimport { Form, Col, Button } from 'react-bootstrap';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nclass EditForm extends Component {\n  constructor(props) {\n    super();\n\n    this.onChangeHandler = (e, field) => {\n      let fields = this.state.fields;\n      fields[field] = e.target.value;\n      this.setState({\n        fields\n      });\n    };\n\n    this.state = {\n      fields: {},\n      errors: {},\n      validation: {}\n    };\n    this.item_name = React.createRef();\n    this.unit_price = React.createRef();\n    this.quantity = React.createRef();\n    this.price_ceiling = React.createRef();\n    this.price_floor = React.createRef();\n    this.description = React.createRef();\n    this.time_limit_min = React.createRef();\n  }\n\n  fieldValidation(e) {\n    console.log(this);\n    let fields = this.state.fields;\n    let errors = {};\n    let dataValidity = true;\n\n    if (!this.item_name.current.value) {\n      console.log(this.item_name);\n      dataValidity = false;\n      errors[\"item_name\"] = \"Cannot be Empty\";\n    }\n\n    if (typeof fields[\"item_name\"] !== \"undefined\") {\n      if (!fields[\"item_name\"].match(/^[a-zA-Z]+$/)) {\n        dataValidity = false;\n        errors[\"item_name\"] = \"Only letters\";\n      }\n    }\n\n    if (!this.unit_price.current.value) {\n      dataValidity = false;\n      errors[\"unit_price\"] = \"Cannot be Empty\";\n    }\n\n    if (typeof fields[\"unit_price\"] !== \"undefined\") {\n      if (isNaN(fields[\"unit_price\"]) || parseInt(fields[\"unit_price\"]) < 0) {\n        dataValidity = false;\n        errors[\"unit_price\"] = \"Only Numbers\";\n      }\n    }\n\n    if (!this.quantity.current.value) {\n      dataValidity = false;\n      errors[\"quantity\"] = \"Cannot be Empty\";\n    }\n\n    if (typeof fields[\"quantity\"] !== \"undefined\") {\n      if (isNaN(fields[\"quantity\"]) || parseInt(fields[\"quantity\"]) < 0) {\n        dataValidity = false;\n        errors[\"quantity\"] = \"Only Numbers\";\n      }\n    }\n\n    if (!this.price_ceiling.current.value) {\n      dataValidity = false;\n      errors[\"price_ceiling\"] = \"Cannot be Empty\";\n    }\n\n    if (typeof fields[\"price_ceiling\"] !== \"undefined\") {\n      if (isNaN(fields[\"price_ceiling\"]) || parseInt(fields[\"price_ceiling\"]) < 0) {\n        dataValidity = false;\n        errors[\"price_ceiling\"] = \"Only Numbers\";\n      }\n    }\n\n    if (!this.price_floor.current.value) {\n      dataValidity = false;\n      errors[\"price_floor\"] = \"Cannot be Empty\";\n    }\n\n    if (typeof fields[\"price_floor\"] !== \"undefined\") {\n      if (isNaN(fields[\"price_floor\"]) || parseInt(fields[\"price_floor\"]) < 0) {\n        dataValidity = false;\n        errors[\"price_floor\"] = \"Only Numbers\";\n      }\n    }\n\n    if (this.description.current.value) {\n      dataValidity = false;\n      errors[\"description\"] = \"Cannot be Empty\";\n    }\n\n    if (!this.item_name.current.value) {\n      dataValidity = false;\n      errors[\"time_limit_min\"] = \"Cannot be Empty\";\n    }\n\n    if (typeof fields[\"time_limit_min\"] !== \"undefined\") {\n      if (isNaN(fields[\"time_limit_min\"]) || parseInt(fields[\"time_limit_min\"]) < 0) {\n        dataValidity = false;\n        errors[\"time_limit_min\"] = \"Only Numbers\";\n      }\n    }\n\n    if (parseInt(fields[\"unit_price\"]) < parseInt(fields[\"price_ceiling\"]) || parseInt(fields[\"unit_price\"]) < parseInt(fields[\"price_floor\"]) || parseInt(fields[\"price_ceiling\"]) < parseInt(fields[\"price_floor\"])) {\n      dataValidity = false;\n      errors[\"algorithm_error\"] = \"Unit Price > Price Ceiling > Price Floor\";\n    }\n\n    this.setState({\n      errors: errors\n    });\n    return dataValidity;\n  }\n\n  onSubmitHandler(e) {\n    e.preventDefault();\n    let value = e.target;\n\n    if (this.fieldValidation(value)) {\n      // let array = [`item_name`, `unit_price`, `quantity`, `price_ceiling`, `price_floor`, `description`, `category_id`, `time_limit_min`, `listing_id`]\n      // let data = {}\n      // array.forEach((item) => {\n      //     if (this.state.fields[item]) {\n      //         return data[item] = e.target[item].value\n      //     } else {\n      //         return data[item] = this.props[item]\n      //     }\n      // })\n      let data = {\n        item_name: e.target.item_name.value,\n        unit_price: e.target.unit_price.value,\n        quantity: e.target.quantity.value,\n        price_ceiling: e.target.price_ceiling.value,\n        price_floor: e.target.price_floor.value,\n        description: e.target.description.value,\n        category_id: e.target.category_id.value,\n        time_limit_min: e.target.time_limit_min.value,\n        listing_id: e.target.listing_id.value\n      };\n      fetch('/editlisting', {\n        method: \"POST\",\n        headers: {\n          \"Content-type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n      }).then(res => res.json()).then(res => {\n        console.log(res);\n        this.props.onClick();\n      });\n    } else {\n      alert(\"Oh lord have mercy on your poor soul ----  you can't even fill in a form FFS\");\n    }\n  }\n\n  render() {\n    console.log(this.item_name);\n    return /*#__PURE__*/React.createElement(Form, {\n      action: \"/editlisting\",\n      method: \"post\",\n      onSubmit: e => this.onSubmitHandler(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Form.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      column: true,\n      lg: 2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 21\n      }\n    }, \"Item Name\"), /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Form.Control, {\n      onKeyUp: e => this.onChangeHandler(e, \"item_name\"),\n      type: \"text\",\n      placeholder: this.props.item_name,\n      name: \"item_name\",\n      ref: this.item_name,\n      defaultValue: this.props.item_name,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 25\n      }\n    }), this.state.errors.item_name ? /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        color: 'red'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 56\n      }\n    }, \"Text\") : null)), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Form.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      column: true,\n      lg: 2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 21\n      }\n    }, \"Unit Price\"), /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Form.Control, {\n      onChange: e => {\n        this.onChangeHandler(e, \"unit_price\");\n      },\n      type: \"text\",\n      placeholder: this.props.unit_price,\n      name: \"unit_price\",\n      ref: this.unit_price,\n      defaultValue: this.props.unit_price,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 25\n      }\n    }), this.state.errors.unit_price ? /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        color: 'red'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 57\n      }\n    }, \"+ve Numbers Only\") : null, this.state.errors.algorithm_error ? /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        color: 'red'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 62\n      }\n    }, \"Unit Price >  Max Price > Min Price \") : null)), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Form.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      column: true,\n      lg: 2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 21\n      }\n    }, \"Quantity\"), /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Form.Control, {\n      onChange: e => {\n        this.onChangeHandler(e, \"quantity\");\n      },\n      type: \"text\",\n      placeholder: this.props.quantity,\n      name: \"quantity\",\n      ref: this.quantity,\n      defaultValue: this.props[\"quantity\"],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 25\n      }\n    }), this.state.errors.quantity ? /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        color: 'red'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 55\n      }\n    }, \"+ve Numbers Only\") : null)), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Form.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      column: true,\n      lg: 2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 21\n      }\n    }, \"Maximum Price\"), /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Form.Control, {\n      onChange: e => {\n        this.onChangeHandler(e, \"price_ceiling\");\n      },\n      type: \"text\",\n      placeholder: this.props.price_ceiling,\n      name: \"price_ceiling\",\n      ref: this.price_ceiling,\n      defaultValue: this.props[\"price_ceiling\"],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 25\n      }\n    }), this.state.errors.price_ceiling ? /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        color: 'red'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 60\n      }\n    }, \"+ve Numbers Only\") : null, this.state.errors.algorithm_error ? /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        color: 'red'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 62\n      }\n    }, \"Unit Price >  Max Price > Min Price \") : null)), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Form.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      column: true,\n      lg: 2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 21\n      }\n    }, \"Minimum Price\"), /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Form.Control, {\n      onChange: e => {\n        this.onChangeHandler(e, \"price_floor\");\n      },\n      type: \"text\",\n      placeholder: this.props.price_floor,\n      name: \"price_floor\",\n      ref: this.price_floor,\n      defaultValue: this.props[\"price_floor\"],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 25\n      }\n    }), this.state.errors.price_floor ? /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        color: 'red'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 58\n      }\n    }, \"+ve Numbers Only\") : null, this.state.errors.algorithm_error ? /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        color: 'red'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 62\n      }\n    }, \"Unit Price >  Max Price > Min Price \") : null)), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Form.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      column: true,\n      lg: 2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 21\n      }\n    }, \"Category\"), /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Form.Control, {\n      name: \"category_id\",\n      as: \"select\",\n      custom: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 29\n      }\n    }, \"Snacks\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 29\n      }\n    }, \"Light Bites\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 29\n      }\n    }, \"Dim Sum\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 29\n      }\n    }, \"Noodles\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 29\n      }\n    }, \"Junk Food\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 29\n      }\n    }, \"Hearty Meals\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"7\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 29\n      }\n    }, \"Snacks\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"8\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 29\n      }\n    }, \"Light Bites\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"9\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 29\n      }\n    }, \"Dim Sum\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"10\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 29\n      }\n    }, \"Noodles\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"11\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 29\n      }\n    }, \"Junk Food\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 29\n      }\n    }, \"Hearty Meals\")))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Form.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      column: true,\n      lg: 2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 21\n      }\n    }, \"Description\"), /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Form.Control, {\n      onChange: e => {\n        this.onChangeHandler(e, \"description\");\n      },\n      type: \"text\",\n      placeholder: this.props.description,\n      name: \"description\",\n      ref: this.description,\n      defaultValue: this.props[\"description\"],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 25\n      }\n    }), this.state.errors.description ? /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        color: 'red'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 58\n      }\n    }, \"Please key in a Description\") : null)), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Form.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      column: true,\n      lg: 2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 21\n      }\n    }, \"Duration\"), /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Form.Control, {\n      onChange: e => {\n        this.onChangeHandler(e, \"time_limit_min\");\n      },\n      type: \"text\",\n      placeholder: this.props.time_limit_min,\n      ref: this.time_limit_min,\n      name: \"time_limit_min\",\n      defaultValue: this.props[\"time_limit_min\"],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 25\n      }\n    }), this.state.errors.time_limit_min ? /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        color: 'red'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 61\n      }\n    }, \"Please key in a valid timing\") : null)), /*#__PURE__*/React.createElement(Button, {\n      type: \"submit\",\n      onClick: () => this.fieldValidation(),\n      className: \"mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 17\n      }\n    }, \"Submit\"), /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Form.Control, {\n      type: \"hidden\",\n      placeholder: \"Normal text\",\n      name: \"listing_id\",\n      value: this.props.listing_id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 21\n      }\n    })));\n  }\n\n}\n\nexport default withRouter(EditForm);","map":{"version":3,"sources":["/home/rlyz/wdi/sei-24-project-3/client/src/Components/Merchant Home/Edit/EditForm.js"],"names":["React","Component","useParams","withRouter","Form","Col","Button","EditForm","constructor","props","onChangeHandler","e","field","fields","state","target","value","setState","errors","validation","item_name","createRef","unit_price","quantity","price_ceiling","price_floor","description","time_limit_min","fieldValidation","console","log","dataValidity","current","match","isNaN","parseInt","onSubmitHandler","preventDefault","data","category_id","listing_id","fetch","method","headers","body","JSON","stringify","then","res","json","onClick","alert","render","color","algorithm_error"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,SAA3B,QAA4C,OAA5C;AACA,SAASC,UAAT,QAA2B,cAA3B;AACA,SAASC,IAAT,EAAeC,GAAf,EAAoBC,MAApB,QAAkC,iBAAlC;AACA,OAAO,sCAAP;;AAEA,MAAMC,QAAN,SAAuBN,SAAvB,CAAiC;AAC7BO,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf;;AADe,SA+FnBC,eA/FmB,GA+FD,CAACC,CAAD,EAAIC,KAAJ,KAAc;AAC5B,UAAIC,MAAM,GAAG,KAAKC,KAAL,CAAWD,MAAxB;AACAA,MAAAA,MAAM,CAACD,KAAD,CAAN,GAAgBD,CAAC,CAACI,MAAF,CAASC,KAAzB;AACA,WAAKC,QAAL,CAAc;AACVJ,QAAAA;AADU,OAAd;AAGH,KArGkB;;AAEf,SAAKC,KAAL,GAAa;AACTD,MAAAA,MAAM,EAAE,EADC;AAENK,MAAAA,MAAM,EAAE,EAFF;AAEMC,MAAAA,UAAU,EAAE;AAFlB,KAAb;AAKA,SAAKC,SAAL,GAAiBpB,KAAK,CAACqB,SAAN,EAAjB;AACA,SAAKC,UAAL,GAAkBtB,KAAK,CAACqB,SAAN,EAAlB;AACA,SAAKE,QAAL,GAAgBvB,KAAK,CAACqB,SAAN,EAAhB;AACA,SAAKG,aAAL,GAAqBxB,KAAK,CAACqB,SAAN,EAArB;AACA,SAAKI,WAAL,GAAmBzB,KAAK,CAACqB,SAAN,EAAnB;AACA,SAAKK,WAAL,GAAmB1B,KAAK,CAACqB,SAAN,EAAnB;AACA,SAAKM,cAAL,GAAsB3B,KAAK,CAACqB,SAAN,EAAtB;AACH;;AAGDO,EAAAA,eAAe,CAACjB,CAAD,EAAI;AACfkB,IAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ;AACA,QAAIjB,MAAM,GAAG,KAAKC,KAAL,CAAWD,MAAxB;AACA,QAAIK,MAAM,GAAG,EAAb;AACA,QAAIa,YAAY,GAAG,IAAnB;;AAEA,QAAI,CAAC,KAAKX,SAAL,CAAeY,OAAf,CAAuBhB,KAA5B,EAAmC;AAC/Ba,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKV,SAAjB;AACAW,MAAAA,YAAY,GAAG,KAAf;AACAb,MAAAA,MAAM,CAAC,WAAD,CAAN,GAAsB,iBAAtB;AACH;;AACD,QAAI,OAAOL,MAAM,CAAC,WAAD,CAAb,KAA+B,WAAnC,EAAgD;AAC5C,UAAI,CAACA,MAAM,CAAC,WAAD,CAAN,CAAoBoB,KAApB,CAA0B,aAA1B,CAAL,EAA+C;AAC3CF,QAAAA,YAAY,GAAG,KAAf;AACAb,QAAAA,MAAM,CAAC,WAAD,CAAN,GAAsB,cAAtB;AACH;AACJ;;AACD,QAAI,CAAC,KAAKI,UAAL,CAAgBU,OAAhB,CAAwBhB,KAA7B,EAAoC;AAChCe,MAAAA,YAAY,GAAG,KAAf;AACAb,MAAAA,MAAM,CAAC,YAAD,CAAN,GAAuB,iBAAvB;AACH;;AACD,QAAI,OAAOL,MAAM,CAAC,YAAD,CAAb,KAAgC,WAApC,EAAiD;AAC7C,UAAIqB,KAAK,CAACrB,MAAM,CAAC,YAAD,CAAP,CAAL,IAA+BsB,QAAQ,CAACtB,MAAM,CAAC,YAAD,CAAP,CAAR,GAAiC,CAApE,EAAuE;AACnEkB,QAAAA,YAAY,GAAG,KAAf;AACAb,QAAAA,MAAM,CAAC,YAAD,CAAN,GAAuB,cAAvB;AACH;AACJ;;AACD,QAAI,CAAC,KAAKK,QAAL,CAAcS,OAAd,CAAsBhB,KAA3B,EAAkC;AAC9Be,MAAAA,YAAY,GAAG,KAAf;AACAb,MAAAA,MAAM,CAAC,UAAD,CAAN,GAAqB,iBAArB;AACH;;AACD,QAAI,OAAOL,MAAM,CAAC,UAAD,CAAb,KAA8B,WAAlC,EAA+C;AAC3C,UAAIqB,KAAK,CAACrB,MAAM,CAAC,UAAD,CAAP,CAAL,IAA6BsB,QAAQ,CAACtB,MAAM,CAAC,UAAD,CAAP,CAAR,GAA+B,CAAhE,EAAmE;AAC/DkB,QAAAA,YAAY,GAAG,KAAf;AACAb,QAAAA,MAAM,CAAC,UAAD,CAAN,GAAqB,cAArB;AACH;AACJ;;AACD,QAAI,CAAC,KAAKM,aAAL,CAAmBQ,OAAnB,CAA2BhB,KAAhC,EAAuC;AACnCe,MAAAA,YAAY,GAAG,KAAf;AACAb,MAAAA,MAAM,CAAC,eAAD,CAAN,GAA0B,iBAA1B;AACH;;AACD,QAAI,OAAOL,MAAM,CAAC,eAAD,CAAb,KAAmC,WAAvC,EAAoD;AAChD,UAAIqB,KAAK,CAACrB,MAAM,CAAC,eAAD,CAAP,CAAL,IAAkCsB,QAAQ,CAACtB,MAAM,CAAC,eAAD,CAAP,CAAR,GAAoC,CAA1E,EAA6E;AACzEkB,QAAAA,YAAY,GAAG,KAAf;AACAb,QAAAA,MAAM,CAAC,eAAD,CAAN,GAA0B,cAA1B;AACH;AACJ;;AACD,QAAI,CAAC,KAAKO,WAAL,CAAiBO,OAAjB,CAAyBhB,KAA9B,EAAqC;AACjCe,MAAAA,YAAY,GAAG,KAAf;AACAb,MAAAA,MAAM,CAAC,aAAD,CAAN,GAAwB,iBAAxB;AACH;;AACD,QAAI,OAAOL,MAAM,CAAC,aAAD,CAAb,KAAiC,WAArC,EAAkD;AAC9C,UAAIqB,KAAK,CAACrB,MAAM,CAAC,aAAD,CAAP,CAAL,IAAgCsB,QAAQ,CAACtB,MAAM,CAAC,aAAD,CAAP,CAAR,GAAkC,CAAtE,EAAyE;AACrEkB,QAAAA,YAAY,GAAG,KAAf;AACAb,QAAAA,MAAM,CAAC,aAAD,CAAN,GAAwB,cAAxB;AACH;AACJ;;AACD,QAAI,KAAKQ,WAAL,CAAiBM,OAAjB,CAAyBhB,KAA7B,EAAoC;AAChCe,MAAAA,YAAY,GAAG,KAAf;AACAb,MAAAA,MAAM,CAAC,aAAD,CAAN,GAAwB,iBAAxB;AACH;;AACD,QAAI,CAAC,KAAKE,SAAL,CAAeY,OAAf,CAAuBhB,KAA5B,EAAmC;AAC/Be,MAAAA,YAAY,GAAG,KAAf;AACAb,MAAAA,MAAM,CAAC,gBAAD,CAAN,GAA2B,iBAA3B;AACH;;AACD,QAAI,OAAOL,MAAM,CAAC,gBAAD,CAAb,KAAoC,WAAxC,EAAqD;AACjD,UAAIqB,KAAK,CAACrB,MAAM,CAAC,gBAAD,CAAP,CAAL,IAAmCsB,QAAQ,CAACtB,MAAM,CAAC,gBAAD,CAAP,CAAR,GAAqC,CAA5E,EAA+E;AAC3EkB,QAAAA,YAAY,GAAG,KAAf;AACAb,QAAAA,MAAM,CAAC,gBAAD,CAAN,GAA2B,cAA3B;AACH;AACJ;;AACD,QAAIiB,QAAQ,CAACtB,MAAM,CAAC,YAAD,CAAP,CAAR,GAAiCsB,QAAQ,CAACtB,MAAM,CAAC,eAAD,CAAP,CAAzC,IAAsEsB,QAAQ,CAACtB,MAAM,CAAC,YAAD,CAAP,CAAR,GAAiCsB,QAAQ,CAACtB,MAAM,CAAC,aAAD,CAAP,CAA/G,IAA0IsB,QAAQ,CAACtB,MAAM,CAAC,eAAD,CAAP,CAAR,GAAoCsB,QAAQ,CAACtB,MAAM,CAAC,aAAD,CAAP,CAA1L,EAAmN;AAC/MkB,MAAAA,YAAY,GAAG,KAAf;AACAb,MAAAA,MAAM,CAAC,iBAAD,CAAN,GAA4B,0CAA5B;AACH;;AACD,SAAKD,QAAL,CAAc;AAAEC,MAAAA,MAAM,EAAEA;AAAV,KAAd;AACA,WAAOa,YAAP;AACH;;AAQDK,EAAAA,eAAe,CAACzB,CAAD,EAAI;AACfA,IAAAA,CAAC,CAAC0B,cAAF;AACA,QAAIrB,KAAK,GAAGL,CAAC,CAACI,MAAd;;AACA,QAAI,KAAKa,eAAL,CAAqBZ,KAArB,CAAJ,EAAiC;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAIsB,IAAI,GAAG;AACPlB,QAAAA,SAAS,EAAET,CAAC,CAACI,MAAF,CAASK,SAAT,CAAmBJ,KADvB;AAEPM,QAAAA,UAAU,EAAEX,CAAC,CAACI,MAAF,CAASO,UAAT,CAAoBN,KAFzB;AAGPO,QAAAA,QAAQ,EAAEZ,CAAC,CAACI,MAAF,CAASQ,QAAT,CAAkBP,KAHrB;AAIPQ,QAAAA,aAAa,EAAEb,CAAC,CAACI,MAAF,CAASS,aAAT,CAAuBR,KAJ/B;AAKPS,QAAAA,WAAW,EAAEd,CAAC,CAACI,MAAF,CAASU,WAAT,CAAqBT,KAL3B;AAMPU,QAAAA,WAAW,EAAEf,CAAC,CAACI,MAAF,CAASW,WAAT,CAAqBV,KAN3B;AAOPuB,QAAAA,WAAW,EAAE5B,CAAC,CAACI,MAAF,CAASwB,WAAT,CAAqBvB,KAP3B;AAQPW,QAAAA,cAAc,EAAEhB,CAAC,CAACI,MAAF,CAASY,cAAT,CAAwBX,KARjC;AASPwB,QAAAA,UAAU,EAAE7B,CAAC,CAACI,MAAF,CAASyB,UAAT,CAAoBxB;AATzB,OAAX;AAWAyB,MAAAA,KAAK,CAAC,cAAD,EAAiB;AAClBC,QAAAA,MAAM,EAAE,MADU;AAElBC,QAAAA,OAAO,EAAE;AACL,0BAAgB;AADX,SAFS;AAKlBC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeR,IAAf;AALY,OAAjB,CAAL,CAMGS,IANH,CAMQC,GAAG,IACPA,GAAG,CAACC,IAAJ,EAPJ,EAQEF,IARF,CAQOC,GAAG,IAAI;AACVnB,QAAAA,OAAO,CAACC,GAAR,CAAYkB,GAAZ;AACA,aAAKvC,KAAL,CAAWyC,OAAX;AACH,OAXD;AAYH,KAjCD,MAiCO;AACHC,MAAAA,KAAK,CAAC,8EAAD,CAAL;AACH;AACJ;;AAEDC,EAAAA,MAAM,GAAG;AACLvB,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKV,SAAjB;AACA,wBACI,oBAAC,IAAD;AAAM,MAAA,MAAM,EAAC,cAAb;AAA4B,MAAA,MAAM,EAAC,MAAnC;AAA0C,MAAA,QAAQ,EAAGT,CAAD,IAAO,KAAKyB,eAAL,CAAqBzB,CAArB,CAA3D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,IAAD,CAAM,GAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,IAAD,CAAM,KAAN;AAAY,MAAA,MAAM,MAAlB;AAAmB,MAAA,EAAE,EAAE,CAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADJ,eAEI,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,IAAD,CAAM,OAAN;AAAc,MAAA,OAAO,EAAGA,CAAD,IAAO,KAAKD,eAAL,CAAqBC,CAArB,EAAwB,WAAxB,CAA9B;AAAoE,MAAA,IAAI,EAAC,MAAzE;AAAgF,MAAA,WAAW,EAAE,KAAKF,KAAL,CAAWW,SAAxG;AAAmH,MAAA,IAAI,EAAC,WAAxH;AAAoI,MAAA,GAAG,EAAE,KAAKA,SAA9I;AAAyJ,MAAA,YAAY,EAAE,KAAKX,KAAL,CAAWW,SAAlL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EAEK,KAAKN,KAAL,CAAWI,MAAX,CAAkBE,SAAlB,gBAA8B;AAAM,MAAA,KAAK,EAAE;AAAEiC,QAAAA,KAAK,EAAE;AAAT,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAA9B,GAA2E,IAFhF,CAFJ,CADJ,eAQI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MARJ,eASI,oBAAC,IAAD,CAAM,GAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,IAAD,CAAM,KAAN;AAAY,MAAA,MAAM,MAAlB;AAAmB,MAAA,EAAE,EAAE,CAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAEI,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,IAAD,CAAM,OAAN;AAAc,MAAA,QAAQ,EAAG1C,CAAD,IAAO;AAAE,aAAKD,eAAL,CAAqBC,CAArB,EAAwB,YAAxB;AAAuC,OAAxE;AAA0E,MAAA,IAAI,EAAC,MAA/E;AAAsF,MAAA,WAAW,EAAE,KAAKF,KAAL,CAAWa,UAA9G;AAA0H,MAAA,IAAI,EAAC,YAA/H;AAA4I,MAAA,GAAG,EAAE,KAAKA,UAAtJ;AAAkK,MAAA,YAAY,EAAE,KAAKb,KAAL,CAAWa,UAA3L;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EAEK,KAAKR,KAAL,CAAWI,MAAX,CAAkBI,UAAlB,gBAA+B;AAAM,MAAA,KAAK,EAAE;AAAE+B,QAAAA,KAAK,EAAE;AAAT,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAA/B,GAAwF,IAF7F,EAGK,KAAKvC,KAAL,CAAWI,MAAX,CAAkBoC,eAAlB,gBAAoC;AAAM,MAAA,KAAK,EAAE;AAAED,QAAAA,KAAK,EAAE;AAAT,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8CAApC,GAAyH,IAH9H,CAFJ,CATJ,eAiBI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAjBJ,eAkBI,oBAAC,IAAD,CAAM,GAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,IAAD,CAAM,KAAN;AAAY,MAAA,MAAM,MAAlB;AAAmB,MAAA,EAAE,EAAE,CAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,IAAD,CAAM,OAAN;AAAc,MAAA,QAAQ,EAAG1C,CAAD,IAAO;AAAE,aAAKD,eAAL,CAAqBC,CAArB,EAAwB,UAAxB;AAAqC,OAAtE;AAAwE,MAAA,IAAI,EAAC,MAA7E;AAAoF,MAAA,WAAW,EAAE,KAAKF,KAAL,CAAWc,QAA5G;AAAsH,MAAA,IAAI,EAAC,UAA3H;AAAsI,MAAA,GAAG,EAAE,KAAKA,QAAhJ;AAA0J,MAAA,YAAY,EAAE,KAAKd,KAAL,CAAW,UAAX,CAAxK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EAEK,KAAKK,KAAL,CAAWI,MAAX,CAAkBK,QAAlB,gBAA6B;AAAM,MAAA,KAAK,EAAE;AAAE8B,QAAAA,KAAK,EAAE;AAAT,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAA7B,GAAsF,IAF3F,CAFJ,CAlBJ,eAyBI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAzBJ,eA0BI,oBAAC,IAAD,CAAM,GAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,IAAD,CAAM,KAAN;AAAY,MAAA,MAAM,MAAlB;AAAmB,MAAA,EAAE,EAAE,CAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADJ,eAEI,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,IAAD,CAAM,OAAN;AAAc,MAAA,QAAQ,EAAG1C,CAAD,IAAO;AAAE,aAAKD,eAAL,CAAqBC,CAArB,EAAwB,eAAxB;AAA0C,OAA3E;AAA6E,MAAA,IAAI,EAAC,MAAlF;AAAyF,MAAA,WAAW,EAAE,KAAKF,KAAL,CAAWe,aAAjH;AAAgI,MAAA,IAAI,EAAC,eAArI;AAAqJ,MAAA,GAAG,EAAE,KAAKA,aAA/J;AAA8K,MAAA,YAAY,EAAE,KAAKf,KAAL,CAAW,eAAX,CAA5L;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EAEK,KAAKK,KAAL,CAAWI,MAAX,CAAkBM,aAAlB,gBAAkC;AAAM,MAAA,KAAK,EAAE;AAAE6B,QAAAA,KAAK,EAAE;AAAT,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAAlC,GAA2F,IAFhG,EAGK,KAAKvC,KAAL,CAAWI,MAAX,CAAkBoC,eAAlB,gBAAoC;AAAM,MAAA,KAAK,EAAE;AAAED,QAAAA,KAAK,EAAE;AAAT,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8CAApC,GAAyH,IAH9H,CAFJ,CA1BJ,eAkCI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAlCJ,eAmCI,oBAAC,IAAD,CAAM,GAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,IAAD,CAAM,KAAN;AAAY,MAAA,MAAM,MAAlB;AAAmB,MAAA,EAAE,EAAE,CAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADJ,eAEI,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,IAAD,CAAM,OAAN;AAAc,MAAA,QAAQ,EAAG1C,CAAD,IAAO;AAAE,aAAKD,eAAL,CAAqBC,CAArB,EAAwB,aAAxB;AAAwC,OAAzE;AAA2E,MAAA,IAAI,EAAC,MAAhF;AAAuF,MAAA,WAAW,EAAE,KAAKF,KAAL,CAAWgB,WAA/G;AAA4H,MAAA,IAAI,EAAC,aAAjI;AAA+I,MAAA,GAAG,EAAE,KAAKA,WAAzJ;AAAsK,MAAA,YAAY,EAAE,KAAKhB,KAAL,CAAW,aAAX,CAApL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EAEK,KAAKK,KAAL,CAAWI,MAAX,CAAkBO,WAAlB,gBAAgC;AAAM,MAAA,KAAK,EAAE;AAAE4B,QAAAA,KAAK,EAAE;AAAT,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAAhC,GAAyF,IAF9F,EAGK,KAAKvC,KAAL,CAAWI,MAAX,CAAkBoC,eAAlB,gBAAoC;AAAM,MAAA,KAAK,EAAE;AAAED,QAAAA,KAAK,EAAE;AAAT,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8CAApC,GAAyH,IAH9H,CAFJ,CAnCJ,eA2CI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA3CJ,eA4CI,oBAAC,IAAD,CAAM,GAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,IAAD,CAAM,KAAN;AAAY,MAAA,MAAM,MAAlB;AAAmB,MAAA,EAAE,EAAE,CAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,IAAD,CAAM,OAAN;AAAc,MAAA,IAAI,EAAC,aAAnB;AAAiC,MAAA,EAAE,EAAC,QAApC;AAA6C,MAAA,MAAM,MAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAQ,MAAA,KAAK,EAAC,GAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAEI;AAAQ,MAAA,KAAK,EAAC,GAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAFJ,eAGI;AAAQ,MAAA,KAAK,EAAC,GAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAHJ,eAII;AAAQ,MAAA,KAAK,EAAC,GAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAJJ,eAKI;AAAQ,MAAA,KAAK,EAAC,GAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBALJ,eAMI;AAAQ,MAAA,KAAK,EAAC,GAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBANJ,eAOI;AAAQ,MAAA,KAAK,EAAC,GAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAPJ,eAQI;AAAQ,MAAA,KAAK,EAAC,GAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBARJ,eASI;AAAQ,MAAA,KAAK,EAAC,GAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBATJ,eAUI;AAAQ,MAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAVJ,eAWI;AAAQ,MAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAXJ,eAYI;AAAQ,MAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAZJ,CADJ,CAFJ,CA5CJ,eA+DI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA/DJ,eAgEI,oBAAC,IAAD,CAAM,GAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,IAAD,CAAM,KAAN;AAAY,MAAA,MAAM,MAAlB;AAAmB,MAAA,EAAE,EAAE,CAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADJ,eAEI,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,IAAD,CAAM,OAAN;AAAc,MAAA,QAAQ,EAAG1C,CAAD,IAAO;AAAE,aAAKD,eAAL,CAAqBC,CAArB,EAAwB,aAAxB;AAAwC,OAAzE;AAA2E,MAAA,IAAI,EAAC,MAAhF;AAAuF,MAAA,WAAW,EAAE,KAAKF,KAAL,CAAWiB,WAA/G;AAA4H,MAAA,IAAI,EAAC,aAAjI;AAA+I,MAAA,GAAG,EAAE,KAAKA,WAAzJ;AAAsK,MAAA,YAAY,EAAE,KAAKjB,KAAL,CAAW,aAAX,CAApL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EAEK,KAAKK,KAAL,CAAWI,MAAX,CAAkBQ,WAAlB,gBAAgC;AAAM,MAAA,KAAK,EAAE;AAAE2B,QAAAA,KAAK,EAAE;AAAT,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qCAAhC,GAAoG,IAFzG,CAFJ,CAhEJ,eAuEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAvEJ,eAwEI,oBAAC,IAAD,CAAM,GAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,IAAD,CAAM,KAAN;AAAY,MAAA,MAAM,MAAlB;AAAmB,MAAA,EAAE,EAAE,CAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,IAAD,CAAM,OAAN;AAAc,MAAA,QAAQ,EAAG1C,CAAD,IAAO;AAAE,aAAKD,eAAL,CAAqBC,CAArB,EAAwB,gBAAxB;AAA2C,OAA5E;AAA8E,MAAA,IAAI,EAAC,MAAnF;AAA0F,MAAA,WAAW,EAAE,KAAKF,KAAL,CAAWkB,cAAlH;AAAkI,MAAA,GAAG,EAAE,KAAKA,cAA5I;AAA4J,MAAA,IAAI,EAAC,gBAAjK;AAAkL,MAAA,YAAY,EAAE,KAAKlB,KAAL,CAAW,gBAAX,CAAhM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EAEK,KAAKK,KAAL,CAAWI,MAAX,CAAkBS,cAAlB,gBAAmC;AAAM,MAAA,KAAK,EAAE;AAAE0B,QAAAA,KAAK,EAAE;AAAT,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sCAAnC,GAAwG,IAF7G,CAFJ,CAxEJ,eA+EI,oBAAC,MAAD;AAAQ,MAAA,IAAI,EAAC,QAAb;AAAsB,MAAA,OAAO,EAAE,MAAM,KAAKzB,eAAL,EAArC;AAA6D,MAAA,SAAS,EAAC,MAAvE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBA/EJ,eAkFI,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,IAAD,CAAM,OAAN;AAAc,MAAA,IAAI,EAAC,QAAnB;AAA4B,MAAA,WAAW,EAAC,aAAxC;AAAsD,MAAA,IAAI,EAAC,YAA3D;AAAwE,MAAA,KAAK,EAAE,KAAKnB,KAAL,CAAW+B,UAA1F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CAlFJ,CADJ;AAwFH;;AA1O4B;;AA6OjC,eAAerC,UAAU,CAACI,QAAD,CAAzB","sourcesContent":["import React, { Component, useParams } from 'react'\nimport { withRouter } from 'react-router'\nimport { Form, Col, Button } from 'react-bootstrap'\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nclass EditForm extends Component {\n    constructor(props) {\n        super()\n        this.state = {\n            fields: {\n            }, errors: {}, validation: {},\n\n        }\n        this.item_name = React.createRef();\n        this.unit_price = React.createRef()\n        this.quantity = React.createRef()\n        this.price_ceiling = React.createRef()\n        this.price_floor = React.createRef()\n        this.description = React.createRef()\n        this.time_limit_min = React.createRef()\n    }\n\n\n    fieldValidation(e) {\n        console.log(this)\n        let fields = this.state.fields;\n        let errors = {};\n        let dataValidity = true;\n\n        if (!this.item_name.current.value) {\n            console.log(this.item_name)\n            dataValidity = false;\n            errors[\"item_name\"] = \"Cannot be Empty\"\n        }\n        if (typeof fields[\"item_name\"] !== \"undefined\") {\n            if (!fields[\"item_name\"].match(/^[a-zA-Z]+$/)) {\n                dataValidity = false;\n                errors[\"item_name\"] = \"Only letters\";\n            }\n        }\n        if (!this.unit_price.current.value) {\n            dataValidity = false;\n            errors[\"unit_price\"] = \"Cannot be Empty\"\n        }\n        if (typeof fields[\"unit_price\"] !== \"undefined\") {\n            if (isNaN(fields[\"unit_price\"]) || parseInt(fields[\"unit_price\"]) < 0) {\n                dataValidity = false;\n                errors[\"unit_price\"] = \"Only Numbers\";\n            }\n        }\n        if (!this.quantity.current.value) {\n            dataValidity = false;\n            errors[\"quantity\"] = \"Cannot be Empty\"\n        }\n        if (typeof fields[\"quantity\"] !== \"undefined\") {\n            if (isNaN(fields[\"quantity\"]) || parseInt(fields[\"quantity\"]) < 0) {\n                dataValidity = false;\n                errors[\"quantity\"] = \"Only Numbers\";\n            }\n        }\n        if (!this.price_ceiling.current.value) {\n            dataValidity = false;\n            errors[\"price_ceiling\"] = \"Cannot be Empty\"\n        }\n        if (typeof fields[\"price_ceiling\"] !== \"undefined\") {\n            if (isNaN(fields[\"price_ceiling\"]) || parseInt(fields[\"price_ceiling\"]) < 0) {\n                dataValidity = false;\n                errors[\"price_ceiling\"] = \"Only Numbers\";\n            }\n        }\n        if (!this.price_floor.current.value) {\n            dataValidity = false;\n            errors[\"price_floor\"] = \"Cannot be Empty\"\n        }\n        if (typeof fields[\"price_floor\"] !== \"undefined\") {\n            if (isNaN(fields[\"price_floor\"]) || parseInt(fields[\"price_floor\"]) < 0) {\n                dataValidity = false;\n                errors[\"price_floor\"] = \"Only Numbers\";\n            }\n        }\n        if (this.description.current.value) {\n            dataValidity = false;\n            errors[\"description\"] = \"Cannot be Empty\"\n        }\n        if (!this.item_name.current.value) {\n            dataValidity = false;\n            errors[\"time_limit_min\"] = \"Cannot be Empty\"\n        }\n        if (typeof fields[\"time_limit_min\"] !== \"undefined\") {\n            if (isNaN(fields[\"time_limit_min\"]) || parseInt(fields[\"time_limit_min\"]) < 0) {\n                dataValidity = false;\n                errors[\"time_limit_min\"] = \"Only Numbers\";\n            }\n        }\n        if (parseInt(fields[\"unit_price\"]) < parseInt(fields[\"price_ceiling\"]) || parseInt(fields[\"unit_price\"]) < parseInt(fields[\"price_floor\"]) || parseInt(fields[\"price_ceiling\"]) < parseInt(fields[\"price_floor\"])) {\n            dataValidity = false;\n            errors[\"algorithm_error\"] = \"Unit Price > Price Ceiling > Price Floor\"\n        }\n        this.setState({ errors: errors })\n        return dataValidity\n    }\n    onChangeHandler = (e, field) => {\n        let fields = this.state.fields;\n        fields[field] = e.target.value;\n        this.setState({\n            fields\n        });\n    }\n    onSubmitHandler(e) {\n        e.preventDefault()\n        let value = e.target\n        if (this.fieldValidation(value)) {\n            // let array = [`item_name`, `unit_price`, `quantity`, `price_ceiling`, `price_floor`, `description`, `category_id`, `time_limit_min`, `listing_id`]\n            // let data = {}\n            // array.forEach((item) => {\n            //     if (this.state.fields[item]) {\n            //         return data[item] = e.target[item].value\n            //     } else {\n            //         return data[item] = this.props[item]\n            //     }\n            // })\n            let data = {\n                item_name: e.target.item_name.value,\n                unit_price: e.target.unit_price.value,\n                quantity: e.target.quantity.value,\n                price_ceiling: e.target.price_ceiling.value,\n                price_floor: e.target.price_floor.value,\n                description: e.target.description.value,\n                category_id: e.target.category_id.value,\n                time_limit_min: e.target.time_limit_min.value,\n                listing_id: e.target.listing_id.value\n            }\n            fetch('/editlisting', {\n                method: \"POST\",\n                headers: {\n                    \"Content-type\": \"application/json\"\n                },\n                body: JSON.stringify(data),\n            }).then(res =>\n                res.json()\n            ).then(res => {\n                console.log(res)\n                this.props.onClick();\n            })\n        } else {\n            alert(\"Oh lord have mercy on your poor soul ----  you can't even fill in a form FFS\")\n        }\n    }\n\n    render() {\n        console.log(this.item_name)\n        return (\n            <Form action=\"/editlisting\" method=\"post\" onSubmit={(e) => this.onSubmitHandler(e)}>\n                <Form.Row>\n                    <Form.Label column lg={2}>Item Name</Form.Label>\n                    <Col>\n                        <Form.Control onKeyUp={(e) => this.onChangeHandler(e, \"item_name\")} type=\"text\" placeholder={this.props.item_name} name=\"item_name\" ref={this.item_name} defaultValue={this.props.item_name} />\n                        {this.state.errors.item_name ? <span style={{ color: 'red' }}>Text</span> : null}\n                    </Col>\n                </Form.Row>\n                <br />\n                <Form.Row>\n                    <Form.Label column lg={2}>Unit Price</Form.Label>\n                    <Col>\n                        <Form.Control onChange={(e) => { this.onChangeHandler(e, \"unit_price\") }} type=\"text\" placeholder={this.props.unit_price} name=\"unit_price\" ref={this.unit_price} defaultValue={this.props.unit_price} />\n                        {this.state.errors.unit_price ? <span style={{ color: 'red' }}>+ve Numbers Only</span> : null}\n                        {this.state.errors.algorithm_error ? <span style={{ color: 'red' }}>Unit Price &#62;  Max Price &#62; Min Price </span> : null}\n                    </Col>\n                </Form.Row>\n                <br />\n                <Form.Row>\n                    <Form.Label column lg={2}>Quantity</Form.Label>\n                    <Col>\n                        <Form.Control onChange={(e) => { this.onChangeHandler(e, \"quantity\") }} type=\"text\" placeholder={this.props.quantity} name=\"quantity\" ref={this.quantity} defaultValue={this.props[\"quantity\"]} />\n                        {this.state.errors.quantity ? <span style={{ color: 'red' }}>+ve Numbers Only</span> : null}\n                    </Col>\n                </Form.Row>\n                <br />\n                <Form.Row>\n                    <Form.Label column lg={2}>Maximum Price</Form.Label>\n                    <Col>\n                        <Form.Control onChange={(e) => { this.onChangeHandler(e, \"price_ceiling\") }} type=\"text\" placeholder={this.props.price_ceiling} name=\"price_ceiling\" ref={this.price_ceiling} defaultValue={this.props[\"price_ceiling\"]} />\n                        {this.state.errors.price_ceiling ? <span style={{ color: 'red' }}>+ve Numbers Only</span> : null}\n                        {this.state.errors.algorithm_error ? <span style={{ color: 'red' }}>Unit Price &#62;  Max Price &#62; Min Price </span> : null}\n                    </Col>\n                </Form.Row>\n                <br />\n                <Form.Row>\n                    <Form.Label column lg={2}>Minimum Price</Form.Label>\n                    <Col>\n                        <Form.Control onChange={(e) => { this.onChangeHandler(e, \"price_floor\") }} type=\"text\" placeholder={this.props.price_floor} name=\"price_floor\" ref={this.price_floor} defaultValue={this.props[\"price_floor\"]} />\n                        {this.state.errors.price_floor ? <span style={{ color: 'red' }}>+ve Numbers Only</span> : null}\n                        {this.state.errors.algorithm_error ? <span style={{ color: 'red' }}>Unit Price &#62;  Max Price &#62; Min Price </span> : null}\n                    </Col>\n                </Form.Row>\n                <br />\n                <Form.Row>\n                    <Form.Label column lg={2}>Category</Form.Label>\n                    <Col>\n                        <Form.Control name=\"category_id\" as=\"select\" custom>\n                            <option value=\"1\">Snacks</option>\n                            <option value=\"2\">Light Bites</option>\n                            <option value=\"3\">Dim Sum</option>\n                            <option value=\"4\">Noodles</option>\n                            <option value=\"5\">Junk Food</option>\n                            <option value=\"6\">Hearty Meals</option>\n                            <option value=\"7\">Snacks</option>\n                            <option value=\"8\">Light Bites</option>\n                            <option value=\"9\">Dim Sum</option>\n                            <option value=\"10\">Noodles</option>\n                            <option value=\"11\">Junk Food</option>\n                            <option value=\"12\">Hearty Meals</option>\n                        </Form.Control>\n                    </Col>\n                </Form.Row>\n                <br />\n                <Form.Row>\n                    <Form.Label column lg={2}>Description</Form.Label>\n                    <Col>\n                        <Form.Control onChange={(e) => { this.onChangeHandler(e, \"description\") }} type=\"text\" placeholder={this.props.description} name=\"description\" ref={this.description} defaultValue={this.props[\"description\"]} />\n                        {this.state.errors.description ? <span style={{ color: 'red' }}>Please key in a Description</span> : null}\n                    </Col>\n                </Form.Row>\n                <br />\n                <Form.Row>\n                    <Form.Label column lg={2}>Duration</Form.Label>\n                    <Col>\n                        <Form.Control onChange={(e) => { this.onChangeHandler(e, \"time_limit_min\") }} type=\"text\" placeholder={this.props.time_limit_min} ref={this.time_limit_min} name=\"time_limit_min\" defaultValue={this.props[\"time_limit_min\"]} />\n                        {this.state.errors.time_limit_min ? <span style={{ color: 'red' }}>Please key in a valid timing</span> : null}\n                    </Col>\n                </Form.Row>\n                <Button type=\"submit\" onClick={() => this.fieldValidation()} className=\"mb-2\">\n                    Submit\n                </Button>\n                <Col>\n                    <Form.Control type=\"hidden\" placeholder=\"Normal text\" name=\"listing_id\" value={this.props.listing_id} />\n                </Col>\n            </Form>\n        )\n    }\n}\n\nexport default withRouter(EditForm)"]},"metadata":{},"sourceType":"module"}