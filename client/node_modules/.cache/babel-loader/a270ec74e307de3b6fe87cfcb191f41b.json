{"ast":null,"code":"var _jsxFileName = \"/home/rlyz/wdi/sei-24-project-3/client/src/Components/User/TimeLine/TimeLine.js\";\nimport React, { Component } from 'react';\nimport EachMerchant from './EachMerchant/EachMerchant';\nimport OrderHistory from '../OrderHistory/OrderHistory';\nimport { Route, Link, Redirect, Switch } from 'react-router-dom';\nimport IndivListing from '../IndivStore/IndivListing';\nimport ListingContainer from '../IndivStore/ListingContainer';\nimport ByCategory from './ByCategory';\nvar fetching = true;\nvar newArray = [];\nexport default class TimeLine extends Component {\n  constructor(props) {\n    super(props);\n\n    this.dropDownOnRefresher = (refreshedState, lon, lat) => {\n      let newArray = this.state.timeLine.map((item, index) => {\n        const uploadTime = new Date(item.time);\n        uploadTime.setMinutes(uploadTime.getMinutes() + item.time_limit_min);\n        let difference = +uploadTime - +new Date();\n\n        if (difference > 0) {\n          return item;\n        }\n      });\n      let newerArray = newArray.filter(item => {\n        return item;\n      });\n      newerArray.sort(function (a, b) {\n        const uploadTimeA = new Date(a.time);\n        uploadTimeA.setMinutes(uploadTimeA.getMinutes() + a.time_limit_min);\n        const uploadTimeB = new Date(b.time);\n        uploadTimeB.setMinutes(uploadTimeB.getMinutes() + b.time_limit_min);\n        return uploadTimeA - uploadTimeB;\n      }); // console.log(newerArray, `before splice`)\n\n      if (newerArray.length > 20) {\n        newerArray.splice(19, newerArray.length - 20);\n      }\n\n      this.setState({\n        mode: refreshedState\n      });\n\n      switch (refreshedState) {\n        default:\n          newerArray.sort(function (a, b) {\n            const uploadTimeA = new Date(a.time);\n            uploadTimeA.setMinutes(uploadTimeA.getMinutes() + a.time_limit_min);\n            const uploadTimeB = new Date(b.time);\n            uploadTimeB.setMinutes(uploadTimeB.getMinutes() + b.time_limit_min); // console.log(`A`, uploadTimeA)\n            // console.log(`B`, uploadTimeB)\n            // console.log(uploadTimeA - uploadTimeB)\n\n            return uploadTimeA - uploadTimeB;\n          });\n          this.setState({\n            sorted: newerArray,\n            status: 'False'\n          });\n          break;\n\n        case \"Discount\":\n          newerArray.sort(function (a, b) {\n            var Adiscount = (a.unit_price - a.price_floor) / a.unit_price * 100;\n            var Bdiscount = (b.unit_price - b.price_floor) / b.unit_price * 100;\n            return Bdiscount - Adiscount;\n          });\n          this.setState({\n            sorted: newerArray,\n            status: 'False'\n          });\n          break;\n\n        case \"Distance\":\n          newerArray.sort(function (a, b) {\n            var radlatUser = Math.PI * lat / 180;\n            var radlatA = Math.PI * a.latitude / 180;\n            var theta = lon - a.longitude;\n            var radtheta = Math.PI * theta / 180;\n            var distA = Math.sin(radlatUser) * Math.sin(radlatA) + Math.cos(radlatUser) * Math.cos(radlatA) * Math.cos(radtheta);\n\n            if (distA > 1) {\n              distA = 1;\n            }\n\n            distA = Math.acos(distA);\n            distA = distA * 180 / Math.PI;\n            distA = distA * 60 * 1.1515;\n            distA = distA * 1.609344;\n            let distanceA = distA * 1.609344;\n            var radlatB = Math.PI * b.latitude / 180;\n            var theta = lon - b.longitude;\n            var radtheta = Math.PI * theta / 180;\n            var distB = Math.sin(radlatUser) * Math.sin(radlatB) + Math.cos(radlatUser) * Math.cos(radlatB) * Math.cos(radtheta);\n\n            if (distB > 1) {\n              distB = 1;\n            }\n\n            distB = Math.acos(distB);\n            distB = distB * 180 / Math.PI;\n            distB = distB * 60 * 1.1515;\n            distB = distB * 1.609344;\n            let distanceB = distB * 1.609344;\n            console.log(a.latitude);\n            console.log(a.longitude);\n            return distanceA - distanceB;\n          });\n          this.setState({\n            sorted: newerArray,\n            status: 'False'\n          });\n          break;\n      }\n    };\n\n    this.dropDownOnChangeHandler = (e, lon, lat) => {\n      let newArray = this.state.timeLine.map((item, index) => {\n        const uploadTime = new Date(item.time);\n        uploadTime.setMinutes(uploadTime.getMinutes() + item.time_limit_min);\n        let difference = +uploadTime - +new Date();\n\n        if (difference > 0) {\n          return item;\n        }\n      });\n      let newerArray = newArray.filter(item => {\n        return item;\n      });\n      let action = e.target.value;\n      newerArray.sort(function (a, b) {\n        const uploadTimeA = new Date(a.time);\n        uploadTimeA.setMinutes(uploadTimeA.getMinutes() + a.time_limit_min);\n        const uploadTimeB = new Date(b.time);\n        uploadTimeB.setMinutes(uploadTimeB.getMinutes() + b.time_limit_min);\n        return uploadTimeA - uploadTimeB;\n      }); // console.log(newerArray, `before splice`)\n\n      if (newerArray.length > 20) {\n        newerArray.splice(19, newerArray.length - 20);\n      }\n\n      this.setState({\n        mode: action\n      });\n\n      switch (e.target.value) {\n        default:\n          newerArray.sort(function (a, b) {\n            const uploadTimeA = new Date(a.time);\n            uploadTimeA.setMinutes(uploadTimeA.getMinutes() + a.time_limit_min);\n            const uploadTimeB = new Date(b.time);\n            uploadTimeB.setMinutes(uploadTimeB.getMinutes() + b.time_limit_min); // console.log(`A`, uploadTimeA)\n            // console.log(`B`, uploadTimeB)\n            // console.log(uploadTimeA - uploadTimeB)\n\n            return uploadTimeA - uploadTimeB;\n          });\n          this.setState({\n            sorted: newerArray,\n            status: 'False'\n          });\n          break;\n\n        case \"Discount\":\n          newerArray.sort(function (a, b) {\n            var Adiscount = (a.unit_price - a.price_floor) / a.unit_price * 100;\n            var Bdiscount = (b.unit_price - b.price_floor) / b.unit_price * 100;\n            return Bdiscount - Adiscount;\n          });\n          this.setState({\n            sorted: newerArray,\n            status: 'False'\n          });\n          break;\n\n        case \"Distance\":\n          newerArray.sort(function (a, b) {\n            var radlatUser = Math.PI * lat / 180;\n            var radlatA = Math.PI * a.latitude / 180;\n            var theta = lon - a.longitude;\n            var radtheta = Math.PI * theta / 180;\n            var distA = Math.sin(radlatUser) * Math.sin(radlatA) + Math.cos(radlatUser) * Math.cos(radlatA) * Math.cos(radtheta);\n\n            if (distA > 1) {\n              distA = 1;\n            }\n\n            distA = Math.acos(distA);\n            distA = distA * 180 / Math.PI;\n            distA = distA * 60 * 1.1515;\n            distA = distA * 1.609344;\n            let distanceA = distA * 1.609344;\n            var radlatB = Math.PI * b.latitude / 180;\n            var theta = lon - b.longitude;\n            var radtheta = Math.PI * theta / 180;\n            var distB = Math.sin(radlatUser) * Math.sin(radlatB) + Math.cos(radlatUser) * Math.cos(radlatB) * Math.cos(radtheta);\n\n            if (distB > 1) {\n              distB = 1;\n            }\n\n            distB = Math.acos(distB);\n            distB = distB * 180 / Math.PI;\n            distB = distB * 60 * 1.1515;\n            distB = distB * 1.609344;\n            let distanceB = distB * 1.609344;\n            console.log(a.latitude);\n            console.log(a.longitude);\n            return distanceA - distanceB;\n          });\n          this.setState({\n            sorted: newerArray,\n            status: 'False'\n          });\n          break;\n      }\n    };\n\n    this.testing = prop => {\n      if (fetching === true) {\n        fetching = false;\n        setTimeout(() => {\n          console.log(`fetching new list soon`);\n          fetch('/timeline').then(res => res.json()).then(res => {\n            console.log(res, `fetched`);\n            fetching = true;\n            this.setState({\n              timeLine: res\n            });\n          }).then(this.dropDownOnRefresher(this.state.value));\n        }, 5000);\n        setTimeout(() => {\n          console.log(`fetching deleted list soon`);\n          fetch('/deletedlisting').then(res => res.json()).then(res => {\n            if (res && res.length > 0) {\n              res.sort(function (a, b) {\n                const uploadTimeA = new Date(a.time);\n                const uploadTimeB = new Date(b.time);\n                return uploadTimeB - uploadTimeA;\n              });\n              this.setState({\n                deletedArray: res\n              });\n            }\n          });\n        }, 5000);\n        setTimeout(() => {\n          let defunctArray = this.state.timeLine.map((item, index) => {\n            const uploadTime = new Date(item.time);\n            uploadTime.setMinutes(uploadTime.getMinutes() + item.time_limit_min);\n            let difference = +uploadTime - +new Date();\n\n            if (difference < 0) {\n              return item;\n            }\n          });\n          let newArray = defunctArray.filter(item => {\n            return item;\n          });\n          console.log(`deleting soon`);\n          fetch('/tidyuplisting', {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n              toBeDeleted: newArray\n            })\n          }).then(res => res.text()).then(res => {\n            console.log(res);\n          });\n        }, 10000);\n      }\n    };\n\n    this.state = {\n      timeLine: [],\n      deletedArray: [],\n      filter: \"\",\n      sorted: [],\n      lat: props.lat,\n      lon: props.lon,\n      status: 'True',\n      mode: 'default'\n    };\n  }\n\n  componentDidMount() {\n    fetch('/timeline').then(res => res.json()).then(res => {\n      // console.log(res);\n      this.setState({\n        timeLine: res\n      });\n    });\n    fetch('/deletedlisting').then(res => res.json()).then(res => {\n      console.log(res);\n\n      if (res && res.length > 0) {\n        res.sort(function (a, b) {\n          const uploadTimeA = new Date(a.time);\n          const uploadTimeB = new Date(b.time);\n          return uploadTimeB - uploadTimeA;\n        });\n        this.setState({\n          deletedArray: res\n        });\n      }\n    });\n  }\n\n  render() {\n    let Array = this.state.timeLine.map((item, index) => {\n      const uploadTime = new Date(item.time);\n      uploadTime.setMinutes(uploadTime.getMinutes() + item.time_limit_min);\n      let difference = +uploadTime - +new Date();\n\n      if (difference > 0) {\n        return item;\n      }\n    });\n    let nArray = Array.filter(item => {\n      return item;\n    });\n    nArray.sort(function (a, b) {\n      const uploadTimeA = new Date(a.time);\n      uploadTimeA.setMinutes(uploadTimeA.getMinutes() + a.time_limit_min);\n      const uploadTimeB = new Date(b.time);\n      uploadTimeB.setMinutes(uploadTimeB.getMinutes() + b.time_limit_min);\n      return uploadTimeA - uploadTimeB;\n    }); // console.log(newerArray, `before splice`)\n\n    if (nArray.length > 20) {\n      nArray.splice(19, nArray.length - 20);\n    }\n\n    let merchantCard = nArray.map((eachCard, index) => {\n      const discount = (eachCard.unit_price - eachCard.price_floor) / eachCard.unit_price * 100;\n      let path = \"/\" + eachCard.merchant_id;\n      return /*#__PURE__*/React.createElement(Link, {\n        class: \"col-lg-4 col-md-6 mb-4\",\n        to: path,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(EachMerchant, {\n        className: \"card h-100\",\n        key: index,\n        duration: eachCard.time_limit_min,\n        time: eachCard.time,\n        merchant_Id: eachCard.merchant_id,\n        what: this.testing,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        class: \"card-img-top\",\n        src: \"https://picsum.photos/700/400\",\n        alt: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(\"h4\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 25\n        }\n      }, eachCard.name, \" \", discount, \"%\"), /*#__PURE__*/React.createElement(\"p\", {\n        class: \"card-text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 25\n        }\n      }, \"Lorem ipsum dolor sit amet\")));\n    }); // console.log(newerArray, `After splice`)\n\n    let sortedCard = this.state.sorted.map((eachCard, index) => {\n      const discount = (eachCard.unit_price - eachCard.price_floor) / eachCard.unit_price * 100;\n      let path = \"/\" + eachCard.merchant_id;\n      return /*#__PURE__*/React.createElement(Link, {\n        class: \"col-lg-4 col-md-6 mb-4\",\n        to: path,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(EachMerchant, {\n        className: \"card h-100\",\n        key: index,\n        duration: eachCard.time_limit_min,\n        time: eachCard.time,\n        merchant_Id: eachCard.merchant_id,\n        what: this.testing,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        class: \"card-img-top\",\n        src: \"https://picsum.photos/700/400\",\n        alt: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(\"h4\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 25\n        }\n      }, eachCard.name, \" \", discount, \"%\"), /*#__PURE__*/React.createElement(\"p\", {\n        class: \"card-text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 25\n        }\n      }, \"Lorem ipsum dolor sit amet\")));\n    });\n    let deletedMerchantCard = this.state.deletedArray.map((eachCard, index) => {\n      const discount = (eachCard.unit_price - eachCard.price_floor) / eachCard.unit_price * 100;\n      let path = \"/\" + eachCard.merchant_id;\n      return /*#__PURE__*/React.createElement(Link, {\n        class: \"col-lg-4 col-md-6 mb-4\",\n        to: path,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 20\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card h-100\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        class: \"card-img-top\",\n        src: \"https://picsum.photos/700/400\",\n        alt: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card-body\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        class: \"card-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 25\n        }\n      }, eachCard.Merchant), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 25\n        }\n      }, eachCard.name), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 25\n        }\n      }, \"up to\", discount, \"%\"))));\n    });\n    console.log(this.state.status);\n    const routeArray = nArray.map((eachCard, index) => {\n      let path = \"/\" + eachCard.merchant_id;\n      return /*#__PURE__*/React.createElement(Route, {\n        path: path,\n        render: () => /*#__PURE__*/React.createElement(ListingContainer, {\n          listing_id: eachCard.listing_id,\n          merchant_id: eachCard.merchant_id,\n          stripper: this.props.stripper,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 378,\n            columnNumber: 23\n          }\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 377,\n          columnNumber: 20\n        }\n      });\n    });\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"nav\", {\n      class: \"navbar navbar-expand-lg navbar-dark bg-dark fixed-top\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 382,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 383,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      class: \"navbar-brand\",\n      href: \"#\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 21\n      }\n    }, \"Start Bootstrap\"), /*#__PURE__*/React.createElement(\"button\", {\n      class: \"navbar-toggler\",\n      type: \"button\",\n      \"data-toggle\": \"collapse\",\n      \"data-target\": \"#navbarResponsive\",\n      \"aria-controls\": \"navbarResponsive\",\n      \"aria-expanded\": \"false\",\n      \"aria-label\": \"Toggle navigation\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 385,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      class: \"navbar-toggler-icon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 386,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"collapse navbar-collapse\",\n      id: \"navbarResponsive\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 388,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      class: \"navbar-nav ml-auto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      class: \"nav-item active\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/Timeline\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 33\n      }\n    }, \"Timeline\", /*#__PURE__*/React.createElement(\"span\", {\n      class: \"sr-only\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 62\n      }\n    }, \"(current)\"))), /*#__PURE__*/React.createElement(\"li\", {\n      class: \"nav-item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 393,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/Orderhistory\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 394,\n        columnNumber: 33\n      }\n    }, \"Order history\")), /*#__PURE__*/React.createElement(\"li\", {\n      class: \"nav-item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 396,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/ByCategory\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 397,\n        columnNumber: 33\n      }\n    }, \"Category\")), /*#__PURE__*/React.createElement(\"li\", {\n      class: \"nav-item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      class: \"nav-link\",\n      href: \"#\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 33\n      }\n    }, \"Contact\"))), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.props.onLogout,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 25\n      }\n    }, \"Log out\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 407,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"carouselExampleIndicators\",\n      class: \"carousel slide my-4\",\n      \"data-ride\": \"carousel\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 408,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"ol\", {\n      class: \"carousel-indicators\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 409,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      \"data-target\": \"#carouselExampleIndicators\",\n      \"data-slide-to\": \"0\",\n      class: \"active\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 410,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"li\", {\n      \"data-target\": \"#carouselExampleIndicators\",\n      \"data-slide-to\": \"1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 411,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"li\", {\n      \"data-target\": \"#carouselExampleIndicators\",\n      \"data-slide-to\": \"2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 412,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"carousel-inner\",\n      role: \"listbox\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 414,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"carousel-item active\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 415,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      class: \"d-block img-fluid\",\n      src: \"https://picsum.photos/1110/350\",\n      alt: \"First slide\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 416,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"carousel-item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 418,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      class: \"d-block img-fluid\",\n      src: \"https://picsum.photos/1110/350\",\n      alt: \"Second slide\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 419,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"carousel-item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 421,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      class: \"d-block img-fluid\",\n      src: \"https://picsum.photos/1110/350\",\n      alt: \"Third slide\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 422,\n        columnNumber: 29\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 426,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      onChange: e => {\n        this.dropDownOnChangeHandler(e, this.state.lon, this.state.lat);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 427,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"Time\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 430,\n        columnNumber: 25\n      }\n    }, \"Time Left\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"Discount\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 431,\n        columnNumber: 25\n      }\n    }, \"Discount\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"Distance\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 432,\n        columnNumber: 25\n      }\n    }, \"Distance\"))), /*#__PURE__*/React.createElement(\"main\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 435,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Switch, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 436,\n        columnNumber: 21\n      }\n    }, routeArray, /*#__PURE__*/React.createElement(Route, {\n      path: \"/Orderhistory\",\n      render: () => /*#__PURE__*/React.createElement(OrderHistory, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 439,\n          columnNumber: 35\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 438,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/\",\n      render: () => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 445,\n          columnNumber: 37\n        }\n      }, \"Ongoing Deals\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 445,\n          columnNumber: 59\n        }\n      }, this.state.status ? merchantCard : sortedCard), /*#__PURE__*/React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 446,\n          columnNumber: 33\n        }\n      }, \"Expired Deals\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 447,\n          columnNumber: 33\n        }\n      }, deletedMerchantCard)),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 444,\n        columnNumber: 25\n      }\n    })))));\n  }\n\n}","map":{"version":3,"sources":["/home/rlyz/wdi/sei-24-project-3/client/src/Components/User/TimeLine/TimeLine.js"],"names":["React","Component","EachMerchant","OrderHistory","Route","Link","Redirect","Switch","IndivListing","ListingContainer","ByCategory","fetching","newArray","TimeLine","constructor","props","dropDownOnRefresher","refreshedState","lon","lat","state","timeLine","map","item","index","uploadTime","Date","time","setMinutes","getMinutes","time_limit_min","difference","newerArray","filter","sort","a","b","uploadTimeA","uploadTimeB","length","splice","setState","mode","sorted","status","Adiscount","unit_price","price_floor","Bdiscount","radlatUser","Math","PI","radlatA","latitude","theta","longitude","radtheta","distA","sin","cos","acos","distanceA","radlatB","distB","distanceB","console","log","dropDownOnChangeHandler","e","action","target","value","testing","prop","setTimeout","fetch","then","res","json","deletedArray","defunctArray","method","headers","body","JSON","stringify","toBeDeleted","text","componentDidMount","render","Array","nArray","merchantCard","eachCard","discount","path","merchant_id","name","sortedCard","deletedMerchantCard","Merchant","routeArray","listing_id","stripper","onLogout"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport EachMerchant from './EachMerchant/EachMerchant'\nimport OrderHistory from '../OrderHistory/OrderHistory'\nimport { Route, Link, Redirect, Switch } from 'react-router-dom'\nimport IndivListing from '../IndivStore/IndivListing'\nimport ListingContainer from '../IndivStore/ListingContainer'\nimport ByCategory from './ByCategory'\nvar fetching = true\nvar newArray = []\n\nexport default class TimeLine extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            timeLine: [],\n            deletedArray: [],\n            filter: \"\",\n            sorted: [],\n            lat: props.lat,\n            lon: props.lon,\n            status: 'True',\n            mode: 'default'\n\n        }\n    }\n    componentDidMount() {\n        fetch('/timeline')\n            .then(res => res.json())\n            .then(res => {\n                // console.log(res);\n                this.setState({\n                    timeLine: res,\n                })\n            })\n\n        fetch('/deletedlisting')\n            .then((res) => res.json())\n            .then((res) => {\n                console.log(res)\n                if (res && res.length > 0) {\n                    res.sort(function (a, b) {\n                        const uploadTimeA = new Date(a.time)\n                        const uploadTimeB = new Date(b.time)\n                        return uploadTimeB - uploadTimeA\n                    })\n                    this.setState({\n                        deletedArray: res\n                    })\n                }\n            })\n\n    }\n    dropDownOnRefresher = (refreshedState, lon, lat) => {\n        let newArray = this.state.timeLine.map((item, index) => {\n            const uploadTime = new Date(item.time)\n            uploadTime.setMinutes(uploadTime.getMinutes() + item.time_limit_min)\n            let difference = +uploadTime - +new Date();\n            if (difference > 0) {\n                return item\n            }\n        })\n        let newerArray = newArray.filter((item) => {\n            return item\n        })\n\n        newerArray.sort(function (a, b) {\n            const uploadTimeA = new Date(a.time)\n            uploadTimeA.setMinutes(uploadTimeA.getMinutes() + a.time_limit_min)\n            const uploadTimeB = new Date(b.time)\n            uploadTimeB.setMinutes(uploadTimeB.getMinutes() + b.time_limit_min)\n            return uploadTimeA - uploadTimeB\n        })\n        // console.log(newerArray, `before splice`)\n        if (newerArray.length > 20) {\n            newerArray.splice(19, newerArray.length - 20)\n        }\n        this.setState({\n            mode: refreshedState\n        })\n        switch (refreshedState) {\n            default:\n                newerArray.sort(function (a, b) {\n                    const uploadTimeA = new Date(a.time)\n                    uploadTimeA.setMinutes(uploadTimeA.getMinutes() + a.time_limit_min)\n                    const uploadTimeB = new Date(b.time)\n                    uploadTimeB.setMinutes(uploadTimeB.getMinutes() + b.time_limit_min)\n                    // console.log(`A`, uploadTimeA)\n                    // console.log(`B`, uploadTimeB)\n                    // console.log(uploadTimeA - uploadTimeB)\n                    return uploadTimeA - uploadTimeB\n                })\n                this.setState({\n                    sorted: newerArray,\n                    status: 'False'\n                })\n                break;\n            case \"Discount\":\n                newerArray.sort(function (a, b) {\n                    var Adiscount = (a.unit_price - a.price_floor) / a.unit_price * 100\n                    var Bdiscount = (b.unit_price - b.price_floor) / b.unit_price * 100\n                    return Bdiscount - Adiscount\n                })\n                this.setState({\n                    sorted: newerArray,\n                    status: 'False'\n                })\n                break;\n            case \"Distance\":\n                newerArray.sort(function (a, b) {\n                    var radlatUser = Math.PI * lat / 180;\n                    var radlatA = Math.PI * a.latitude / 180;\n                    var theta = lon - a.longitude;\n                    var radtheta = Math.PI * theta / 180;\n                    var distA = Math.sin(radlatUser) * Math.sin(radlatA) + Math.cos(radlatUser) * Math.cos(radlatA) * Math.cos(radtheta);\n                    if (distA > 1) {\n                        distA = 1;\n                    }\n                    distA = Math.acos(distA);\n                    distA = distA * 180 / Math.PI;\n                    distA = distA * 60 * 1.1515;\n                    distA = distA * 1.609344\n                    let distanceA = distA * 1.609344\n                    var radlatB = Math.PI * b.latitude / 180;\n                    var theta = lon - b.longitude;\n                    var radtheta = Math.PI * theta / 180;\n                    var distB = Math.sin(radlatUser) * Math.sin(radlatB) + Math.cos(radlatUser) * Math.cos(radlatB) * Math.cos(radtheta);\n                    if (distB > 1) {\n                        distB = 1;\n                    }\n                    distB = Math.acos(distB);\n                    distB = distB * 180 / Math.PI;\n                    distB = distB * 60 * 1.1515;\n                    distB = distB * 1.609344\n                    let distanceB = distB * 1.609344\n                    console.log(a.latitude)\n                    console.log(a.longitude)\n                    return distanceA - distanceB\n                })\n                this.setState({\n                    sorted: newerArray,\n                    status: 'False'\n                })\n                break;\n\n        }\n    }\n    dropDownOnChangeHandler = (e, lon, lat) => {\n        let newArray = this.state.timeLine.map((item, index) => {\n            const uploadTime = new Date(item.time)\n            uploadTime.setMinutes(uploadTime.getMinutes() + item.time_limit_min)\n            let difference = +uploadTime - +new Date();\n            if (difference > 0) {\n                return item\n            }\n        })\n        let newerArray = newArray.filter((item) => {\n            return item\n        })\n\n        let action = e.target.value\n        newerArray.sort(function (a, b) {\n            const uploadTimeA = new Date(a.time)\n            uploadTimeA.setMinutes(uploadTimeA.getMinutes() + a.time_limit_min)\n            const uploadTimeB = new Date(b.time)\n            uploadTimeB.setMinutes(uploadTimeB.getMinutes() + b.time_limit_min)\n            return uploadTimeA - uploadTimeB\n        })\n        // console.log(newerArray, `before splice`)\n        if (newerArray.length > 20) {\n            newerArray.splice(19, newerArray.length - 20)\n        }\n        this.setState({\n            mode: action\n        })\n        switch (e.target.value) {\n            default:\n                newerArray.sort(function (a, b) {\n                    const uploadTimeA = new Date(a.time)\n                    uploadTimeA.setMinutes(uploadTimeA.getMinutes() + a.time_limit_min)\n                    const uploadTimeB = new Date(b.time)\n                    uploadTimeB.setMinutes(uploadTimeB.getMinutes() + b.time_limit_min)\n                    // console.log(`A`, uploadTimeA)\n                    // console.log(`B`, uploadTimeB)\n                    // console.log(uploadTimeA - uploadTimeB)\n                    return uploadTimeA - uploadTimeB\n                })\n                this.setState({\n                    sorted: newerArray,\n                    status: 'False'\n                })\n                break;\n            case \"Discount\":\n                newerArray.sort(function (a, b) {\n                    var Adiscount = (a.unit_price - a.price_floor) / a.unit_price * 100\n                    var Bdiscount = (b.unit_price - b.price_floor) / b.unit_price * 100\n                    return Bdiscount - Adiscount\n                })\n                this.setState({\n                    sorted: newerArray,\n                    status: 'False'\n                })\n                break;\n            case \"Distance\":\n                newerArray.sort(function (a, b) {\n                    var radlatUser = Math.PI * lat / 180;\n                    var radlatA = Math.PI * a.latitude / 180;\n                    var theta = lon - a.longitude;\n                    var radtheta = Math.PI * theta / 180;\n                    var distA = Math.sin(radlatUser) * Math.sin(radlatA) + Math.cos(radlatUser) * Math.cos(radlatA) * Math.cos(radtheta);\n                    if (distA > 1) {\n                        distA = 1;\n                    }\n                    distA = Math.acos(distA);\n                    distA = distA * 180 / Math.PI;\n                    distA = distA * 60 * 1.1515;\n                    distA = distA * 1.609344\n                    let distanceA = distA * 1.609344\n                    var radlatB = Math.PI * b.latitude / 180;\n                    var theta = lon - b.longitude;\n                    var radtheta = Math.PI * theta / 180;\n                    var distB = Math.sin(radlatUser) * Math.sin(radlatB) + Math.cos(radlatUser) * Math.cos(radlatB) * Math.cos(radtheta);\n                    if (distB > 1) {\n                        distB = 1;\n                    }\n                    distB = Math.acos(distB);\n                    distB = distB * 180 / Math.PI;\n                    distB = distB * 60 * 1.1515;\n                    distB = distB * 1.609344\n                    let distanceB = distB * 1.609344\n                    console.log(a.latitude)\n                    console.log(a.longitude)\n                    return distanceA - distanceB\n                })\n                this.setState({\n                    sorted: newerArray,\n                    status: 'False'\n                })\n                break;\n\n        }\n    }\n\n    testing = (prop) => {\n\n        if (fetching === true) {\n            fetching = false\n            setTimeout(() => {\n                console.log(`fetching new list soon`)\n                fetch('/timeline')\n                    .then(res => res.json())\n                    .then(res => {\n                        console.log(res, `fetched`)\n                        fetching = true\n                        this.setState({\n                            timeLine: res,\n                        })\n                    }).then(this.dropDownOnRefresher(this.state.value))\n            }, 5000)\n\n            setTimeout(() => {\n                console.log(`fetching deleted list soon`)\n                fetch('/deletedlisting')\n                    .then((res) => res.json())\n                    .then((res) => {\n                        if (res && res.length > 0) {\n                            res.sort(function (a, b) {\n                                const uploadTimeA = new Date(a.time)\n                                const uploadTimeB = new Date(b.time)\n                                return uploadTimeB - uploadTimeA\n                            })\n                            this.setState({\n                                deletedArray: res\n                            })\n                        }\n                    })\n            }, 5000)\n\n            setTimeout(() => {\n                let defunctArray = this.state.timeLine.map((item, index) => {\n                    const uploadTime = new Date(item.time)\n                    uploadTime.setMinutes(uploadTime.getMinutes() + item.time_limit_min)\n                    let difference = +uploadTime - +new Date();\n                    if (difference < 0) {\n                        return item\n                    }\n                })\n                let newArray = defunctArray.filter((item) => {\n                    return item\n                })\n                console.log(`deleting soon`)\n                fetch('/tidyuplisting', {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json'\n                    },\n                    body: JSON.stringify({ toBeDeleted: newArray })\n                })\n                    .then((res) => res.text())\n                    .then((res) => {\n                        console.log(res)\n                    })\n            }, 10000)\n        }\n    }\n    render() {\n        let Array = this.state.timeLine.map((item, index) => {\n            const uploadTime = new Date(item.time)\n            uploadTime.setMinutes(uploadTime.getMinutes() + item.time_limit_min)\n            let difference = +uploadTime - +new Date();\n            if (difference > 0) {\n                return item\n            }\n        })\n        let nArray = Array.filter((item) => {\n            return item\n        })\n\n\n        nArray.sort(function (a, b) {\n            const uploadTimeA = new Date(a.time)\n            uploadTimeA.setMinutes(uploadTimeA.getMinutes() + a.time_limit_min)\n            const uploadTimeB = new Date(b.time)\n            uploadTimeB.setMinutes(uploadTimeB.getMinutes() + b.time_limit_min)\n            return uploadTimeA - uploadTimeB\n        })\n        // console.log(newerArray, `before splice`)\n        if (nArray.length > 20) {\n            nArray.splice(19, nArray.length - 20)\n        }\n        let merchantCard = nArray.map((eachCard, index) => {\n            const discount = (eachCard.unit_price - eachCard.price_floor) / eachCard.unit_price * 100\n            let path = \"/\" + eachCard.merchant_id\n            return (\n\n                <Link class=\"col-lg-4 col-md-6 mb-4\" to={path}>\n                    <EachMerchant className=\"card h-100\" key={index} duration={eachCard.time_limit_min} time={eachCard.time} merchant_Id={eachCard.merchant_id} what={this.testing}>\n                        <img class=\"card-img-top\" src=\"https://picsum.photos/700/400\" alt=\"\" />\n                        <h4>{eachCard.name} {discount}%</h4>\n                        <p class=\"card-text\">Lorem ipsum dolor sit amet</p>\n                    </EachMerchant>\n                </Link>)\n        })\n        // console.log(newerArray, `After splice`)\n        let sortedCard = this.state.sorted.map((eachCard, index) => {\n            const discount = (eachCard.unit_price - eachCard.price_floor) / eachCard.unit_price * 100\n            let path = \"/\" + eachCard.merchant_id\n            return (\n\n                <Link class=\"col-lg-4 col-md-6 mb-4\" to={path}>\n                    <EachMerchant className=\"card h-100\" key={index} duration={eachCard.time_limit_min} time={eachCard.time} merchant_Id={eachCard.merchant_id} what={this.testing}>\n                        <img class=\"card-img-top\" src=\"https://picsum.photos/700/400\" alt=\"\" />\n                        <h4>{eachCard.name} {discount}%</h4>\n                        <p class=\"card-text\">Lorem ipsum dolor sit amet</p>\n                    </EachMerchant>\n                </Link>)\n        })\n\n        let deletedMerchantCard = this.state.deletedArray.map((eachCard, index) => {\n            const discount = (eachCard.unit_price - eachCard.price_floor) / eachCard.unit_price * 100\n            let path = \"/\" + eachCard.merchant_id\n            return <Link class=\"col-lg-4 col-md-6 mb-4\" to={path}>\n                <div className=\"card h-100\">\n                    <img class=\"card-img-top\" src=\"https://picsum.photos/700/400\" alt=\"\" />\n                    <div className=\"card-body\">\n                        <h4 class=\"card-title\">\n                            {eachCard.Merchant}\n                        </h4>\n                        <div>{eachCard.name}</div>\n                        <div>up to{discount}%</div>\n                    </div>\n                </div>\n            </Link>\n        })\n        console.log(this.state.status)\n        const routeArray = nArray.map((eachCard, index) => {\n            let path = \"/\" + eachCard.merchant_id\n            return <Route path={path} render={\n                () => <ListingContainer listing_id={eachCard.listing_id} merchant_id={eachCard.merchant_id} stripper={this.props.stripper} />\n            } />\n        })\n        return (<>\n            <nav class=\"navbar navbar-expand-lg navbar-dark bg-dark fixed-top\">\n                <div class=\"container\">\n                    <a class=\"navbar-brand\" href=\"#\">Start Bootstrap</a>\n                    <button class=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarResponsive\" aria-controls=\"navbarResponsive\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n                        <span class=\"navbar-toggler-icon\"></span>\n                    </button>\n                    <div class=\"collapse navbar-collapse\" id=\"navbarResponsive\">\n                        <ul class=\"navbar-nav ml-auto\">\n                            <li class=\"nav-item active\">\n                                <Link to=\"/Timeline\">Timeline<span class=\"sr-only\">(current)</span></Link>\n                            </li>\n                            <li class=\"nav-item\">\n                                <Link to=\"/Orderhistory\">Order history</Link>\n                            </li>\n                            <li class=\"nav-item\">\n                                <Link to=\"/ByCategory\">Category</Link>\n                            </li>\n                            <li class=\"nav-item\">\n                                <a class=\"nav-link\" href=\"#\">Contact</a>\n                            </li>\n                        </ul>\n                        <button onClick={this.props.onLogout}>Log out</button>\n                    </div>\n                </div>\n            </nav>\n            <div className='container'>\n                <div id=\"carouselExampleIndicators\" class=\"carousel slide my-4\" data-ride=\"carousel\">\n                    <ol class=\"carousel-indicators\">\n                        <li data-target=\"#carouselExampleIndicators\" data-slide-to=\"0\" class=\"active\"></li>\n                        <li data-target=\"#carouselExampleIndicators\" data-slide-to=\"1\"></li>\n                        <li data-target=\"#carouselExampleIndicators\" data-slide-to=\"2\"></li>\n                    </ol>\n                    <div class=\"carousel-inner\" role=\"listbox\">\n                        <div class=\"carousel-item active\">\n                            <img class=\"d-block img-fluid\" src=\"https://picsum.photos/1110/350\" alt=\"First slide\" />\n                        </div>\n                        <div class=\"carousel-item\">\n                            <img class=\"d-block img-fluid\" src=\"https://picsum.photos/1110/350\" alt=\"Second slide\" />\n                        </div>\n                        <div class=\"carousel-item\">\n                            <img class=\"d-block img-fluid\" src=\"https://picsum.photos/1110/350\" alt=\"Third slide\" />\n                        </div>\n                    </div>\n                </div>\n                <div>\n                    <select onChange={(e) => {\n                        this.dropDownOnChangeHandler(e, this.state.lon, this.state.lat)\n                    }}>\n                        <option value=\"Time\">Time Left</option>\n                        <option value=\"Discount\">Discount</option>\n                        <option value=\"Distance\">Distance</option>\n                    </select>\n                </div>\n                <main>\n                    <Switch>\n                        {routeArray}\n                        <Route path=\"/Orderhistory\" render={\n                            () => <OrderHistory />\n                        } />\n                        {/* <Route path=\"/ByCategory\" render={\n                            () => <ByCategory data={this.state.timeLine} lon={this.props.lon} lat={this.props.lat} />\n                        } /> */}\n                        <Route path=\"/\" render={\n                            () => <><h1>Ongoing Deals</h1><div className=\"row\">{this.state.status ? merchantCard : sortedCard}</div>\n                                <h1>Expired Deals</h1>\n                                <div className=\"row\">{deletedMerchantCard}</div>\n                            </>\n                        } />\n                    </Switch>\n                </main>\n            </div >\n        </>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}