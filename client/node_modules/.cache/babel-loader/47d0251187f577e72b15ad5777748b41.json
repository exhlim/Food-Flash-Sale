{"ast":null,"code":"import _defineProperty from\"/Users/eugenelim/Desktop/wdi/SEI-24-Project-3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/eugenelim/Desktop/wdi/SEI-24-Project-3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/Users/eugenelim/Desktop/wdi/SEI-24-Project-3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/eugenelim/Desktop/wdi/SEI-24-Project-3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/eugenelim/Desktop/wdi/SEI-24-Project-3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/eugenelim/Desktop/wdi/SEI-24-Project-3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/eugenelim/Desktop/wdi/SEI-24-Project-3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/eugenelim/Desktop/wdi/SEI-24-Project-3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import IndivListing from'./IndivListing';import Basket from'./Basket';import CheckoutForm from'./CheckoutForm';import PaymentOverlay from'./PaymentOverlay';import{Elements}from'@stripe/react-stripe-js';import{loadStripe}from'@stripe/stripe-js';var ListingContainer=/*#__PURE__*/function(_React$Component){_inherits(ListingContainer,_React$Component);var _super=_createSuper(ListingContainer);function ListingContainer(props){var _this;_classCallCheck(this,ListingContainer);//mounting\n_this=_super.call(this,props);console.log(\"----inside Listing constructor\");_this.state={merchant_id:props.merchant_id,merchant_name:\"\",merchant_img:\"\",html:[],result:[],cart:[],viewCart:false,checkout:false};_this.addToCart=_this.addToCart.bind(_assertThisInitialized(_this));_this.navigateTo=_this.navigateTo.bind(_assertThisInitialized(_this));_this.handleAddToCart=_this.handleAddToCart.bind(_assertThisInitialized(_this));_this.handleRemoveFromCart=_this.handleRemoveFromCart.bind(_assertThisInitialized(_this));_this.handleCheckOut=_this.handleCheckOut.bind(_assertThisInitialized(_this));return _this;}//\n//payment click handlling\n_createClass(ListingContainer,[{key:\"handleCheckOut\",value:function handleCheckOut(){this.setState({checkout:true});}//delete from cart\n},{key:\"handleRemoveFromCart\",value:function handleRemoveFromCart(e,item){this.setState(function(state){var cart=state.cart.filter(function(element){return element.name!=item.name;});localStorage.setItem('cart',cart);return{cart:cart};});}//add to cart button\n},{key:\"addToCart\",value:function addToCart(e,_addToCart){console.log(_addToCart);this.setState(function(prevState){return{cart:[].concat(_toConsumableArray(prevState.cart),[_addToCart])};});}// view cart button\n},{key:\"navigateTo\",value:function navigateTo(){this.setState({viewCart:!this.state.viewCart});}},{key:\"handleAddToCart\",value:function handleAddToCart(e,product){var _this2=this;console.log(product);this.setState(function(state){var cart=state.cart;var productAlreadyInCart=false;cart.forEach(function(item){if(item.name===product.name){productAlreadyInCart=true;item.count++;}});if(!productAlreadyInCart){cart.push(_objectSpread(_objectSpread({},product),{},{count:1}));}localStorage.setItem(\"cart\",JSON.stringify(cart));return cart;console.log(_this2.state.cart);});}//when state is changed, FETCH results from aPI\n//side effects ie: HTTP requests are allowed here\n},{key:\"componentDidMount\",value:function componentDidMount(){var _this3=this;fetch(\"/indivshop/\".concat(this.state.merchant_id)).then(function(res){return res.json();}).then(function(res){return _this3.setState({result:res,html:_this3.format(res),merchant_name:res[0].name});});}//update and re-render once checkout is clicked and this.state.checkout=true;\n},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){if(prevState.checkout!==this.state.checkout){return/*#__PURE__*/React.createElement(PaymentOverlay,null);}}//helper functions\n//take the res.json and convert into nice HTML\n},{key:\"format\",value:function format(array){var _this4=this;return array.map(function(item,index){var _React$createElement;var item_name=item.item_name;var quantity=item.quantity;var discPrice=item.price_ceiling;var originalPrice=item.unit_price;var discount=(originalPrice-discPrice)/originalPrice;var merchant_name=item.name;var cuisine=item.cuisine;var listing_id=item.listing_id;var merchant_id=item.merchant_id;return/*#__PURE__*/React.createElement(\"div\",{key:index},/*#__PURE__*/React.createElement(IndivListing,(_React$createElement={item_name:item_name,quantity:quantity,discPrice:discPrice,originalPrice:originalPrice},_defineProperty(_React$createElement,\"discPrice\",discPrice),_defineProperty(_React$createElement,\"discount\",discount),_defineProperty(_React$createElement,\"merchant_name\",merchant_name),_defineProperty(_React$createElement,\"cuisine\",cuisine),_defineProperty(_React$createElement,\"onClick\",_this4.handleAddToCart),_defineProperty(_React$createElement,\"listing_id\",listing_id),_defineProperty(_React$createElement,\"merchant_id\",merchant_id),_React$createElement)));});}},{key:\"render\",value:function render(){var stripePromise=loadStripe(this.props.stripper);// if (this.state.checkout) {\n//     return (\n//         <div><PaymentOverlay cart={this.state.cart} stripper={this.props.stripper} /></div>\n//     )\n// }\nif(this.state.viewCart&&this.state.cart[0]){var data={merchant_id:this.state.cart[0].merchant_id,//user_id:\nname:this.state.cart[0].name,user_id:this.state.cart[0].user_id,listing_id:this.state.cart[0].listing_id,price:this.state.cart[0].price,quantity:this.state.cart[0].count/2,revenue:this.state.cart[0].count/2*this.state.cart[0].price};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",null,\"You are viewing deals from \",this.state.merchant_name),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"h1\",null,\"Order Summary\"),/*#__PURE__*/React.createElement(\"table\",{style:{maxWidth:\"300px\",margin:\"0 auto\"}},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Item Name\"),/*#__PURE__*/React.createElement(\"th\",null,\"Quantity\"),/*#__PURE__*/React.createElement(\"th\",null,\"Total\")),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,this.state.cart[0].name),/*#__PURE__*/React.createElement(\"td\",null,this.state.cart[0].count/2),/*#__PURE__*/React.createElement(\"td\",null,\"Total: $\",this.state.cart[0].count/2*this.state.cart[0].price))),/*#__PURE__*/React.createElement(Elements,{stripe:stripePromise},/*#__PURE__*/React.createElement(CheckoutForm,{data:data}))),/*#__PURE__*/React.createElement(\"div\",{className:\"ListItems\"},this.state.html));}else{return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"button\",{onClick:this.navigateTo},\"View Cart \",this.state.cart.length),/*#__PURE__*/React.createElement(\"h1\",null,\"You are viewing deals from \",this.state.merchant_name),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"ListItems\"},this.state.html));}}}]);return ListingContainer;}(React.Component);export{ListingContainer as default};","map":{"version":3,"sources":["/Users/eugenelim/Desktop/wdi/SEI-24-Project-3/client/src/Components/User/IndivStore/ListingContainer.js"],"names":["React","IndivListing","Basket","CheckoutForm","PaymentOverlay","Elements","loadStripe","ListingContainer","props","console","log","state","merchant_id","merchant_name","merchant_img","html","result","cart","viewCart","checkout","addToCart","bind","navigateTo","handleAddToCart","handleRemoveFromCart","handleCheckOut","setState","e","item","filter","element","name","localStorage","setItem","prevState","product","productAlreadyInCart","forEach","count","push","JSON","stringify","fetch","then","res","json","format","prevProps","array","map","index","item_name","quantity","discPrice","price_ceiling","originalPrice","unit_price","discount","cuisine","listing_id","stripePromise","stripper","data","user_id","price","revenue","maxWidth","margin","length","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport IndivListing from './IndivListing';\nimport Basket from './Basket';\nimport CheckoutForm from './CheckoutForm';\nimport PaymentOverlay from './PaymentOverlay';\nimport { Elements } from '@stripe/react-stripe-js';\nimport { loadStripe } from '@stripe/stripe-js'\n\nexport default class ListingContainer extends React.Component {\n    constructor(props) {\n        //mounting\n        super(props)\n        console.log(\"----inside Listing constructor\")\n\n        this.state = {\n            merchant_id: props.merchant_id,\n            merchant_name: \"\",\n            merchant_img: \"\",\n            html: [],\n            result: [],\n            cart: [],\n            viewCart: false,\n            checkout: false\n        }\n\n        this.addToCart = this.addToCart.bind(this);\n        this.navigateTo = this.navigateTo.bind(this)\n        this.handleAddToCart = this.handleAddToCart.bind(this)\n        this.handleRemoveFromCart = this.handleRemoveFromCart.bind(this);\n        this.handleCheckOut = this.handleCheckOut.bind(this)\n\n    }\n    //\n\n\n\n\n    //payment click handlling\n    handleCheckOut() {\n        this.setState({ checkout: true })\n\n    }\n\n\n\n\n\n    //delete from cart\n    handleRemoveFromCart(e, item) {\n        this.setState(state => {\n            const cart = state.cart.filter(element => element.name != item.name);\n            localStorage.setItem('cart', cart);\n            return { cart }\n        })\n    }\n\n\n    //add to cart button\n    addToCart(e, addToCart) {\n        console.log(addToCart)\n        this.setState((prevState) =>\n            ({ cart: [...prevState.cart, addToCart] }))\n    }\n\n\n    // view cart button\n    navigateTo() {\n        this.setState({ viewCart: !this.state.viewCart })\n    }\n\n    handleAddToCart(e, product) {\n        console.log(product)\n\n        this.setState(state => {\n            const cart = state.cart;\n            let productAlreadyInCart = false;\n            cart.forEach(item => {\n                if (item.name === product.name) {\n                    productAlreadyInCart = true;\n                    item.count++;\n                }\n            });\n            if (!productAlreadyInCart) {\n                cart.push({ ...product, count: 1 })\n            }\n            localStorage.setItem(\"cart\", JSON.stringify(cart));\n            return cart;\n            console.log(this.state.cart)\n        })\n    }\n\n\n\n    //when state is changed, FETCH results from aPI\n    //side effects ie: HTTP requests are allowed here\n    componentDidMount() {\n        fetch(`/indivshop/${this.state.merchant_id}`)\n            .then(res => res.json())\n            .then(res =>\n                this.setState({ result: res, html: this.format(res), merchant_name: res[0].name })\n            )\n    }\n\n\n    //update and re-render once checkout is clicked and this.state.checkout=true;\n\n    componentDidUpdate(prevProps, prevState) {\n        if (prevState.checkout !== this.state.checkout) {\n            return <PaymentOverlay />\n        }\n    }\n\n\n\n    //helper functions\n\n    //take the res.json and convert into nice HTML\n    format(array) {\n        return array.map((item, index) => {\n            let item_name = item.item_name;\n            let quantity = item.quantity;\n            let discPrice = item.price_ceiling;\n            let originalPrice = item.unit_price;\n            let discount = (originalPrice - discPrice) / originalPrice\n            let merchant_name = item.name;\n            let cuisine = item.cuisine;\n            let listing_id = item.listing_id;\n            let merchant_id = item.merchant_id\n\n            return <div key={index}>\n                <IndivListing item_name={item_name} quantity={quantity} discPrice={discPrice} originalPrice={originalPrice} discPrice={discPrice} discount={discount} merchant_name={merchant_name} cuisine={cuisine} onClick={this.handleAddToCart} listing_id={listing_id} merchant_id={merchant_id} />\n\n            </div>\n        })\n    }\n\n\n    render() {\n        const stripePromise = loadStripe(this.props.stripper)\n        // if (this.state.checkout) {\n        //     return (\n        //         <div><PaymentOverlay cart={this.state.cart} stripper={this.props.stripper} /></div>\n\n        //     )\n        // }\n\n\n\n\n        if (this.state.viewCart && this.state.cart[0]) {\n            let data = {\n                merchant_id: this.state.cart[0].merchant_id,\n                //user_id:\n                name: this.state.cart[0].name,\n                user_id: this.state.cart[0].user_id,\n                listing_id: this.state.cart[0].listing_id,\n                price: this.state.cart[0].price,\n                quantity: this.state.cart[0].count / 2,\n                revenue: this.state.cart[0].count / 2 * this.state.cart[0].price\n            }\n            return (\n                <div>\n\n                    <div>\n                        <h1>You are viewing deals from {this.state.merchant_name}</h1>\n                        <br />\n                        <h1>Order Summary</h1>\n                        <table style={{ maxWidth: \"300px\", margin: \"0 auto\" }}>\n                            <tr>\n                                <th>Item Name</th>\n                                <th>Quantity</th>\n                                <th>Total</th>\n                            </tr>\n                            <tr>\n                                <td>{this.state.cart[0].name}</td>\n                                <td>{this.state.cart[0].count / 2}</td>\n                                <td>Total: ${this.state.cart[0].count / 2 * this.state.cart[0].price}</td>\n                            </tr>\n                        </table>\n                        <Elements stripe={stripePromise}><CheckoutForm data={data}></CheckoutForm></Elements>\n                    </div>\n                    <div className=\"ListItems\" >\n                        {this.state.html}\n                    </div>\n                </div>\n            )\n\n        } else {\n            return (\n                <>\n                    <button onClick={this.navigateTo}>View Cart {this.state.cart.length}</button>\n                    <h1>You are viewing deals from {this.state.merchant_name}</h1>\n                    <br />\n\n                    <div className=\"ListItems\" >\n                        {this.state.html}\n                    </div>\n\n                </>\n            )\n        }\n    }\n}"]},"metadata":{},"sourceType":"module"}